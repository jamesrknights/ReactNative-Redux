{"version":3,"sources":["location.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;AAEA;;;AACA,IAAA,kBAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,IAAA,wBAAA,GAAA,OAAA,CAAA,mDAAA,CAAA;AAEA;;;AACA,IAAA,gBAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;;AAQA,IAAA,eAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAqC,EAAA,SAAA,CAAA,eAAA,EAAA,MAAA,CAAA;;AAIjC,WAAA,eAAA,CAAa,MAAb,EAAkD;AAAlD,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAEI,IAAA,KAAI,CAAC,aAAL,GAAqB,IAAI,gBAAA,CAAA,QAAJ,CAAa,IAAb,CAArB;;AACH;;AAEO,EAAA,eAAA,CAAA,SAAA,CAAA,WAAA,GAAP,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACG,QAAI,MAAM,GAAG,IAAb;;AACA,QAAI,CAAC,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,SAAd,CAAL,EAA+B;AAC3B,MAAA,SAAS,CAAC,WAAV,CAAsB,kBAAtB,CACI,UAAC,QAAD,EAAS;AACL,QAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB,CAA2B,QAA3B;;AACA,QAAA,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,KAAnB,EAAoB,kBAAA,CAAA,UAAA,CAAW,KAAI,CAAC,aAAhB,CAApB;AACH,OAJL,EAKI,UAAC,KAAD,EAAM;AACF,QAAA,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,KAAnB,EAAoB,kBAAA,CAAA,eAAA,CAAgB,KAAhB,CAApB;AACH,OAPL,EAQI;AAAC,QAAA,kBAAkB,EAAE,IAArB;AAA2B,QAAA,OAAO,EAAG,KAArC;AAA4C,QAAA,UAAU,EAAG;AAAzD,OARJ;AAUH,KAXD,MAWO;AACH,YAAM,IAAI,YAAJ,CAAiB,gCAAjB,CAAN;AACH;AACJ,GAhBO;;AAkBD,EAAA,eAAA,CAAA,SAAA,CAAA,aAAA,GAAP,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,QAAI,CAAC,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,SAAd,CAAL,EAA+B;AAC3B,MAAA,SAAS,CAAC,WAAV,CAAsB,aAAtB,CACI,UAAC,QAAD,EAAS;AACL,QAAA,KAAI,CAAC,aAAL,CAAmB,OAAnB,CAA2B,QAA3B;;AACA,QAAA,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,KAAnB,EAAoB,kBAAA,CAAA,eAAA,CAAgB,KAAI,CAAC,aAArB,CAApB;AACH,OAJL,EAKI,UAAC,KAAD,EAAM;AACF,QAAA,MAAA,CAAA,SAAA,CAAM,aAAN,CAAmB,IAAnB,CAAmB,KAAnB,EAAoB,kBAAA,CAAA,eAAA,CAAgB,KAAhB,CAApB;AACH,OAPL,EAQI;AAAC,QAAA,kBAAkB,EAAE,KAArB;AAA4B,QAAA,OAAO,EAAE,KAArC;AAA4C,QAAA,UAAU,EAAE;AAAxD,OARJ;AAUH,KAXD,MAWO;AACH,YAAM,IAAI,YAAJ,CAAiB,gCAAjB,CAAN;AACH;AACJ,GAfM;;AAgBX,SAAA,eAAA;AAAC,CA3CD,CAAqC,wBAAA,CAAA,oBAArC,CAAA;;AAAa,OAAA,CAAA,eAAA,GAAA,eAAA,C","sourcesContent":["\r\nimport { Helper } from '../../util/helper';\r\n\r\n/* Events */\r\nimport { onLocation, onLocationError, onWatchLocation } from '../event/location.actions';\r\nimport { AbstractEventEmitter } from '../../common/event/service/abstract.event.emitter';\r\n\r\n/* Model */\r\nimport { Location } from '../model/location.model';\r\n\r\nexport interface LocationConfiguration {\r\n    enableHighAccuracy : boolean,\r\n    timeout : number | null\r\n    maximumAge : number | null\r\n}\r\n\r\nexport class LocationService extends AbstractEventEmitter {\r\n\r\n    private locationModel : Location;\r\n\r\n    constructor (config : LocationConfiguration | null) {\r\n        super();\r\n        this.locationModel = new Location(null);\r\n    }\r\n\r\n     public getLocation () {\r\n        let result = null;\r\n        if (!Helper.isNull(navigator)) {\r\n            navigator.geolocation.getCurrentPosition (\r\n                (position) => {\r\n                    this.locationModel.setList(position);\r\n                    super.dispatchEvent(onLocation(this.locationModel));\r\n                },\r\n                (error) => { \r\n                    super.dispatchEvent(onLocationError(error));\r\n                },\r\n                {enableHighAccuracy: true, timeout : 10000, maximumAge : 0}  \r\n            )\r\n        } else {\r\n            throw new DOMException(\"No Source given to GeoLocation\");\r\n        }\r\n    }\r\n\r\n    public watchLocation () : void { \r\n        if (!Helper.isNull(navigator)) {\r\n            navigator.geolocation.watchPosition (\r\n                (position) => {\r\n                    this.locationModel.setList(position);\r\n                    super.dispatchEvent(onWatchLocation(this.locationModel));\r\n                },\r\n                (error) => {\r\n                    super.dispatchEvent(onLocationError(error));\r\n                },\r\n                {enableHighAccuracy: false, timeout: 20000, maximumAge: 0}\r\n            )\r\n        } else {\r\n            throw new DOMException(\"No Source given to GeoLocation\");\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}