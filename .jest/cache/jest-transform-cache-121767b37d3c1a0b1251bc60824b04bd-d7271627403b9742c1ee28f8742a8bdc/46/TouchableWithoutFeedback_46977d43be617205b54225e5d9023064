7005c7ae8d53625120d8412e80510b48

'use strict';

var EdgeInsetsPropType = require('EdgeInsetsPropType');
var React = require('React');
var PropTypes = require('prop-types');

var TimerMixin = require('react-timer-mixin');
var Touchable = require('Touchable');

var createReactClass = require('create-react-class');
var ensurePositiveDelayProps = require('ensurePositiveDelayProps');

var warning = require('fbjs/lib/warning');

var _require = require('ViewAccessibility'),
    AccessibilityComponentTypes = _require.AccessibilityComponentTypes,
    AccessibilityTraits = _require.AccessibilityTraits;

var PRESS_RETENTION_OFFSET = { top: 20, left: 20, right: 20, bottom: 30 };

var TouchableWithoutFeedback = createReactClass({
  displayName: 'TouchableWithoutFeedback',
  mixins: [TimerMixin, Touchable.Mixin],

  propTypes: {
    accessible: PropTypes.bool,
    accessibilityComponentType: PropTypes.oneOf(AccessibilityComponentTypes),
    accessibilityTraits: PropTypes.oneOfType([PropTypes.oneOf(AccessibilityTraits), PropTypes.arrayOf(PropTypes.oneOf(AccessibilityTraits))]),

    disabled: PropTypes.bool,

    onPress: PropTypes.func,

    onPressIn: PropTypes.func,

    onPressOut: PropTypes.func,

    onLayout: PropTypes.func,

    onLongPress: PropTypes.func,

    delayPressIn: PropTypes.number,

    delayPressOut: PropTypes.number,

    delayLongPress: PropTypes.number,

    pressRetentionOffset: EdgeInsetsPropType,

    hitSlop: EdgeInsetsPropType
  },

  getInitialState: function getInitialState() {
    return this.touchableGetInitialState();
  },

  componentDidMount: function componentDidMount() {
    ensurePositiveDelayProps(this.props);
  },

  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    ensurePositiveDelayProps(nextProps);
  },

  touchableHandlePress: function touchableHandlePress(e) {
    this.props.onPress && this.props.onPress(e);
  },

  touchableHandleActivePressIn: function touchableHandleActivePressIn(e) {
    this.props.onPressIn && this.props.onPressIn(e);
  },

  touchableHandleActivePressOut: function touchableHandleActivePressOut(e) {
    this.props.onPressOut && this.props.onPressOut(e);
  },

  touchableHandleLongPress: function touchableHandleLongPress(e) {
    this.props.onLongPress && this.props.onLongPress(e);
  },

  touchableGetPressRectOffset: function touchableGetPressRectOffset() {
    return this.props.pressRetentionOffset || PRESS_RETENTION_OFFSET;
  },

  touchableGetHitSlop: function touchableGetHitSlop() {
    return this.props.hitSlop;
  },

  touchableGetHighlightDelayMS: function touchableGetHighlightDelayMS() {
    return this.props.delayPressIn || 0;
  },

  touchableGetLongPressDelayMS: function touchableGetLongPressDelayMS() {
    return this.props.delayLongPress === 0 ? 0 : this.props.delayLongPress || 500;
  },

  touchableGetPressOutDelayMS: function touchableGetPressOutDelayMS() {
    return this.props.delayPressOut || 0;
  },

  render: function render() {
    var child = React.Children.only(this.props.children);
    var children = child.props.children;
    warning(!child.type || child.type.displayName !== 'Text', 'TouchableWithoutFeedback does not work well with Text children. Wrap children in a View instead. See ' + (child._owner && child._owner.getName && child._owner.getName() || '<unknown>'));
    if (Touchable.TOUCH_TARGET_DEBUG && child.type && child.type.displayName === 'View') {
      children = React.Children.toArray(children);
      children.push(Touchable.renderDebugView({ color: 'red', hitSlop: this.props.hitSlop }));
    }
    var style = Touchable.TOUCH_TARGET_DEBUG && child.type && child.type.displayName === 'Text' ? [child.props.style, { color: 'red' }] : child.props.style;
    return React.cloneElement(child, {
      accessible: this.props.accessible !== false,
      accessibilityLabel: this.props.accessibilityLabel,
      accessibilityComponentType: this.props.accessibilityComponentType,
      accessibilityTraits: this.props.accessibilityTraits,
      nativeID: this.props.nativeID,
      testID: this.props.testID,
      onLayout: this.props.onLayout,
      hitSlop: this.props.hitSlop,
      onStartShouldSetResponder: this.touchableHandleStartShouldSetResponder,
      onResponderTerminationRequest: this.touchableHandleResponderTerminationRequest,
      onResponderGrant: this.touchableHandleResponderGrant,
      onResponderMove: this.touchableHandleResponderMove,
      onResponderRelease: this.touchableHandleResponderRelease,
      onResponderTerminate: this.touchableHandleResponderTerminate,
      style: style,
      children: children
    });
  }
});

module.exports = TouchableWithoutFeedback;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjay5qcyJdLCJuYW1lcyI6WyJFZGdlSW5zZXRzUHJvcFR5cGUiLCJyZXF1aXJlIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJUaW1lck1peGluIiwiVG91Y2hhYmxlIiwiY3JlYXRlUmVhY3RDbGFzcyIsImVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyIsIndhcm5pbmciLCJBY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZXMiLCJBY2Nlc3NpYmlsaXR5VHJhaXRzIiwiUFJFU1NfUkVURU5USU9OX09GRlNFVCIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsIlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayIsImRpc3BsYXlOYW1lIiwibWl4aW5zIiwiTWl4aW4iLCJwcm9wVHlwZXMiLCJhY2Nlc3NpYmxlIiwiYm9vbCIsImFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlIiwib25lT2YiLCJhY2Nlc3NpYmlsaXR5VHJhaXRzIiwib25lT2ZUeXBlIiwiYXJyYXlPZiIsImRpc2FibGVkIiwib25QcmVzcyIsImZ1bmMiLCJvblByZXNzSW4iLCJvblByZXNzT3V0Iiwib25MYXlvdXQiLCJvbkxvbmdQcmVzcyIsImRlbGF5UHJlc3NJbiIsIm51bWJlciIsImRlbGF5UHJlc3NPdXQiLCJkZWxheUxvbmdQcmVzcyIsInByZXNzUmV0ZW50aW9uT2Zmc2V0IiwiaGl0U2xvcCIsImdldEluaXRpYWxTdGF0ZSIsInRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSIsImNvbXBvbmVudERpZE1vdW50IiwicHJvcHMiLCJVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsIm5leHRQcm9wcyIsInRvdWNoYWJsZUhhbmRsZVByZXNzIiwiZSIsInRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4iLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dCIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJ0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TIiwidG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUyIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsInJlbmRlciIsImNoaWxkIiwiQ2hpbGRyZW4iLCJvbmx5IiwiY2hpbGRyZW4iLCJ0eXBlIiwiX293bmVyIiwiZ2V0TmFtZSIsIlRPVUNIX1RBUkdFVF9ERUJVRyIsInRvQXJyYXkiLCJwdXNoIiwicmVuZGVyRGVidWdWaWV3IiwiY29sb3IiLCJzdHlsZSIsImNsb25lRWxlbWVudCIsImFjY2Vzc2liaWxpdHlMYWJlbCIsIm5hdGl2ZUlEIiwidGVzdElEIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwib25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJvblJlc3BvbmRlckdyYW50IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJvblJlc3BvbmRlck1vdmUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlIiwib25SZXNwb25kZXJSZWxlYXNlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSIsIm9uUmVzcG9uZGVyVGVybWluYXRlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjtBQVNBOztBQUVBLElBQU1BLHFCQUFxQkMsUUFBUSxvQkFBUixDQUEzQjtBQUNBLElBQU1DLFFBQVFELFFBQVEsT0FBUixDQUFkO0FBQ0EsSUFBTUUsWUFBWUYsUUFBUSxZQUFSLENBQWxCOztBQUlBLElBQU1HLGFBQWFILFFBQVEsbUJBQVIsQ0FBbkI7QUFDQSxJQUFNSSxZQUFZSixRQUFRLFdBQVIsQ0FBbEI7O0FBRUEsSUFB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QU1kLEtBQU4sQ0FBWTBCLEtBQWIsRUFBb0IsRUFBQ0QsT0FBTyxLQUFSLEVBQXBCLENBRFksR0FFWlgsTUFBTWQsS0FBTixDQUFZMEIsS0FGZDtBQUdBLFdBQVFwRSxLQUFELENBQWFxRSxZQUFiLENBQTBCYixLQUExQixFQUFpQztBQUN0Q3JDLGtCQUFZLEtBQUt1QixLQUFMLENBQVd2QixVQUFYLEtBQTBCLEtBREE7QUFFdENtRCwwQkFBb0IsS0FBSzVCLEtBQUwsQ0FBVzRCLGtCQUZPO0FBR3RDakQsa0NBQTRCLEtBQUtxQixLQUFMLENBQVdyQiwwQkFIRDtBQUl0Q0UsMkJBQXFCLEtBQUttQixLQUFMLENBQVduQixtQkFKTTtBQUt0Q2dELGdCQUFVLEtBQUs3QixLQUFMLENBQVc2QixRQUxpQjtBQU10Q0MsY0FBUSxLQUFLOUIsS0FBTCxDQUFXOEIsTUFObUI7QUFPdEN6QyxnQkFBVSxLQUFLVyxLQUFMLENBQVdYLFFBUGlCO0FBUXRDTyxlQUFTLEtBQUtJLEtBQUwsQ0FBV0osT0FSa0I7QUFTdENtQyxpQ0FBMkIsS0FBS0Msc0NBVE07QUFVdENDLHFDQUErQixLQUFLQywwQ0FWRTtBQVd0Q0Msd0JBQWtCLEtBQUtDLDZCQVhlO0FBWXRDQyx1QkFBaUIsS0FBS0MsNEJBWmdCO0FBYXRDQywwQkFBb0IsS0FBS0MsK0JBYmE7QUFjdENDLDRCQUFzQixLQUFLQyxpQ0FkVztBQWV0Q2hCLGtCQWZzQztBQWdCdENUO0FBaEJzQyxLQUFqQyxDQUFQO0FBa0JEO0FBL0orQyxDQUFqQixDQUFqQzs7QUFrS0EwQixPQUFPQyxPQUFQLEdBQWlCeEUsd0JBQWpCIiwiZmlsZSI6IlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjay5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFja1xuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBFZGdlSW5zZXRzUHJvcFR5cGUgPSByZXF1aXJlKCdFZGdlSW5zZXRzUHJvcFR5cGUnKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgnUmVhY3QnKTtcbmNvbnN0IFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbi8qICRGbG93Rml4TWUoPj0wLjU0LjAgc2l0ZT1yZWFjdF9uYXRpdmVfb3NzKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhbiBlcnJvclxuICogZm91bmQgd2hlbiBGbG93IHYwLjU0IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZFxuICogcnVuIEZsb3cuICovXG5jb25zdCBUaW1lck1peGluID0gcmVxdWlyZSgncmVhY3QtdGltZXItbWl4aW4nKTtcbmNvbnN0IFRvdWNoYWJsZSA9IHJlcXVpcmUoJ1RvdWNoYWJsZScpO1xuXG5jb25zdCBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5jb25zdCBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMgPSByZXF1aXJlKCdlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMnKTtcbi8qICRGbG93Rml4TWUoPj0wLjU0LjAgc2l0ZT1yZWFjdF9uYXRpdmVfb3NzKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhbiBlcnJvclxuICogZm91bmQgd2hlbiBGbG93IHYwLjU0IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZFxuICogcnVuIEZsb3cuICovXG5jb25zdCB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5jb25zdCB7XG4gIEFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlcyxcbiAgQWNjZXNzaWJpbGl0eVRyYWl0cyxcbn0gPSByZXF1aXJlKCdWaWV3QWNjZXNzaWJpbGl0eScpO1xuXG5pbXBvcnQgdHlwZSB7UHJlc3NFdmVudH0gZnJvbSAnQ29yZUV2ZW50VHlwZXMnO1xuXG5jb25zdCBQUkVTU19SRVRFTlRJT05fT0ZGU0VUID0ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzB9O1xuXG4vKipcbiAqIERvIG5vdCB1c2UgdW5sZXNzIHlvdSBoYXZlIGEgdmVyeSBnb29kIHJlYXNvbi4gQWxsIGVsZW1lbnRzIHRoYXRcbiAqIHJlc3BvbmQgdG8gcHJlc3Mgc2hvdWxkIGhhdmUgYSB2aXN1YWwgZmVlZGJhY2sgd2hlbiB0b3VjaGVkLlxuICpcbiAqIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayBzdXBwb3J0cyBvbmx5IG9uZSBjaGlsZC5cbiAqIElmIHlvdSB3aXNoIHRvIGhhdmUgc2V2ZXJhbCBjaGlsZCBjb21wb25lbnRzLCB3cmFwIHRoZW0gaW4gYSBWaWV3LlxuICovXG5jb25zdCBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2sgPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdUb3VjaGFibGVXaXRob3V0RmVlZGJhY2snLFxuICBtaXhpbnM6IFtUaW1lck1peGluLCBUb3VjaGFibGUuTWl4aW5dLFxuXG4gIHByb3BUeXBlczoge1xuICAgIGFjY2Vzc2libGU6IFByb3BUeXBlcy5ib29sLFxuICAgIGFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlOiBQcm9wVHlwZXMub25lT2YoXG4gICAgICBBY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZXNcbiAgICApLFxuICAgIGFjY2Vzc2liaWxpdHlUcmFpdHM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgUHJvcFR5cGVzLm9uZU9mKEFjY2Vzc2liaWxpdHlUcmFpdHMpLFxuICAgICAgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9uZU9mKEFjY2Vzc2liaWxpdHlUcmFpdHMpKSxcbiAgICBdKSxcbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCBkaXNhYmxlIGFsbCBpbnRlcmFjdGlvbnMgZm9yIHRoaXMgY29tcG9uZW50LlxuICAgICAqL1xuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgdG91Y2ggaXMgcmVsZWFzZWQsIGJ1dCBub3QgaWYgY2FuY2VsbGVkIChlLmcuIGJ5IGEgc2Nyb2xsXG4gICAgICogdGhhdCBzdGVhbHMgdGhlIHJlc3BvbmRlciBsb2NrKS5cbiAgICAgKi9cbiAgICBvblByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAqIENhbGxlZCBhcyBzb29uIGFzIHRoZSB0b3VjaGFibGUgZWxlbWVudCBpcyBwcmVzc2VkIGFuZCBpbnZva2VkIGV2ZW4gYmVmb3JlIG9uUHJlc3MuXG4gICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiBtYWtpbmcgbmV0d29yayByZXF1ZXN0cy5cbiAgICAqL1xuICAgIG9uUHJlc3NJbjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgKiBDYWxsZWQgYXMgc29vbiBhcyB0aGUgdG91Y2ggaXMgcmVsZWFzZWQgZXZlbiBiZWZvcmUgb25QcmVzcy5cbiAgICAqL1xuICAgICBvblByZXNzT3V0OiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIG1vdW50IGFuZCBsYXlvdXQgY2hhbmdlcyB3aXRoXG4gICAgICpcbiAgICAgKiAgIGB7bmF0aXZlRXZlbnQ6IHtsYXlvdXQ6IHt4LCB5LCB3aWR0aCwgaGVpZ2h0fX19YFxuICAgICAqL1xuICAgIG9uTGF5b3V0OiBQcm9wVHlwZXMuZnVuYyxcblxuICAgIG9uTG9uZ1ByZXNzOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIERlbGF5IGluIG1zLCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgdG91Y2gsIGJlZm9yZSBvblByZXNzSW4gaXMgY2FsbGVkLlxuICAgICAqL1xuICAgIGRlbGF5UHJlc3NJbjogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBEZWxheSBpbiBtcywgZnJvbSB0aGUgcmVsZWFzZSBvZiB0aGUgdG91Y2gsIGJlZm9yZSBvblByZXNzT3V0IGlzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBkZWxheVByZXNzT3V0OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIERlbGF5IGluIG1zLCBmcm9tIG9uUHJlc3NJbiwgYmVmb3JlIG9uTG9uZ1ByZXNzIGlzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBkZWxheUxvbmdQcmVzczogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBzY3JvbGwgdmlldyBpcyBkaXNhYmxlZCwgdGhpcyBkZWZpbmVzIGhvdyBmYXIgeW91ciB0b3VjaCBtYXlcbiAgICAgKiBtb3ZlIG9mZiBvZiB0aGUgYnV0dG9uLCBiZWZvcmUgZGVhY3RpdmF0aW5nIHRoZSBidXR0b24uIE9uY2UgZGVhY3RpdmF0ZWQsXG4gICAgICogdHJ5IG1vdmluZyBpdCBiYWNrIGFuZCB5b3UnbGwgc2VlIHRoYXQgdGhlIGJ1dHRvbiBpcyBvbmNlIGFnYWluXG4gICAgICogcmVhY3RpdmF0ZWQhIE1vdmUgaXQgYmFjayBhbmQgZm9ydGggc2V2ZXJhbCB0aW1lcyB3aGlsZSB0aGUgc2Nyb2xsIHZpZXdcbiAgICAgKiBpcyBkaXNhYmxlZC4gRW5zdXJlIHlvdSBwYXNzIGluIGEgY29uc3RhbnQgdG8gcmVkdWNlIG1lbW9yeSBhbGxvY2F0aW9ucy5cbiAgICAgKi9cbiAgICBwcmVzc1JldGVudGlvbk9mZnNldDogRWRnZUluc2V0c1Byb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIFRoaXMgZGVmaW5lcyBob3cgZmFyIHlvdXIgdG91Y2ggY2FuIHN0YXJ0IGF3YXkgZnJvbSB0aGUgYnV0dG9uLiBUaGlzIGlzXG4gICAgICogYWRkZWQgdG8gYHByZXNzUmV0ZW50aW9uT2Zmc2V0YCB3aGVuIG1vdmluZyBvZmYgb2YgdGhlIGJ1dHRvbi5cbiAgICAgKiAqKiBOT1RFICoqXG4gICAgICogVGhlIHRvdWNoIGFyZWEgbmV2ZXIgZXh0ZW5kcyBwYXN0IHRoZSBwYXJlbnQgdmlldyBib3VuZHMgYW5kIHRoZSBaLWluZGV4XG4gICAgICogb2Ygc2libGluZyB2aWV3cyBhbHdheXMgdGFrZXMgcHJlY2VkZW5jZSBpZiBhIHRvdWNoIGhpdHMgdHdvIG92ZXJsYXBwaW5nXG4gICAgICogdmlld3MuXG4gICAgICovXG4gICAgaGl0U2xvcDogRWRnZUluc2V0c1Byb3BUeXBlLFxuICB9LFxuXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlKCk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyh0aGlzLnByb3BzKTtcbiAgfSxcblxuICBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV4dFByb3BzOiBPYmplY3QpIHtcbiAgICBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMobmV4dFByb3BzKTtcbiAgfSxcblxuICAvKipcbiAgICogYFRvdWNoYWJsZS5NaXhpbmAgc2VsZiBjYWxsYmFja3MuIFRoZSBtaXhpbiB3aWxsIGludm9rZSB0aGVzZSBpZiB0aGV5IGFyZVxuICAgKiBkZWZpbmVkIG9uIHlvdXIgY29tcG9uZW50LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUHJlc3M6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uUHJlc3MgJiYgdGhpcy5wcm9wcy5vblByZXNzKGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uUHJlc3NJbiAmJiB0aGlzLnByb3BzLm9uUHJlc3NJbihlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25QcmVzc091dCAmJiB0aGlzLnByb3BzLm9uUHJlc3NPdXQoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vbkxvbmdQcmVzcyAmJiB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzKGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldDogZnVuY3Rpb24oKTogdHlwZW9mIFBSRVNTX1JFVEVOVElPTl9PRkZTRVQge1xuICAgIHJldHVybiB0aGlzLnByb3BzLnByZXNzUmV0ZW50aW9uT2Zmc2V0IHx8IFBSRVNTX1JFVEVOVElPTl9PRkZTRVQ7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0SGl0U2xvcDogZnVuY3Rpb24oKTogP09iamVjdCB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaGl0U2xvcDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TOiBmdW5jdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5UHJlc3NJbiB8fCAwO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVM6IGZ1bmN0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGVsYXlMb25nUHJlc3MgPT09IDAgPyAwIDpcbiAgICAgIHRoaXMucHJvcHMuZGVsYXlMb25nUHJlc3MgfHwgNTAwO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUzogZnVuY3Rpb24oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheVByZXNzT3V0IHx8IDA7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpOiBSZWFjdC5FbGVtZW50PGFueT4ge1xuICAgIC8vIE5vdGUoYXZpayk6IHJlbW92ZSBkeW5hbWljIHR5cGVjYXN0IG9uY2UgRmxvdyBoYXMgYmVlbiB1cGdyYWRlZFxuICAgIC8vICRGbG93Rml4TWUoPj0wLjQxLjApXG4gICAgY29uc3QgY2hpbGQgPSBSZWFjdC5DaGlsZHJlbi5vbmx5KHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICAgIGxldCBjaGlsZHJlbiA9IGNoaWxkLnByb3BzLmNoaWxkcmVuO1xuICAgIHdhcm5pbmcoXG4gICAgICAhY2hpbGQudHlwZSB8fCBjaGlsZC50eXBlLmRpc3BsYXlOYW1lICE9PSAnVGV4dCcsXG4gICAgICAnVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIGRvZXMgbm90IHdvcmsgd2VsbCB3aXRoIFRleHQgY2hpbGRyZW4uIFdyYXAgY2hpbGRyZW4gaW4gYSBWaWV3IGluc3RlYWQuIFNlZSAnICtcbiAgICAgICAgKChjaGlsZC5fb3duZXIgJiYgY2hpbGQuX293bmVyLmdldE5hbWUgJiYgY2hpbGQuX293bmVyLmdldE5hbWUoKSkgfHwgJzx1bmtub3duPicpXG4gICAgKTtcbiAgICBpZiAoVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRyAmJiBjaGlsZC50eXBlICYmIGNoaWxkLnR5cGUuZGlzcGxheU5hbWUgPT09ICdWaWV3Jykge1xuICAgICAgY2hpbGRyZW4gPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTtcbiAgICAgIGNoaWxkcmVuLnB1c2goVG91Y2hhYmxlLnJlbmRlckRlYnVnVmlldyh7Y29sb3I6ICdyZWQnLCBoaXRTbG9wOiB0aGlzLnByb3BzLmhpdFNsb3B9KSk7XG4gICAgfVxuICAgIGNvbnN0IHN0eWxlID0gKFRvdWNoYWJsZS5UT1VDSF9UQVJHRVRfREVCVUcgJiYgY2hpbGQudHlwZSAmJiBjaGlsZC50eXBlLmRpc3BsYXlOYW1lID09PSAnVGV4dCcpID9cbiAgICAgIFtjaGlsZC5wcm9wcy5zdHlsZSwge2NvbG9yOiAncmVkJ31dIDpcbiAgICAgIGNoaWxkLnByb3BzLnN0eWxlO1xuICAgIHJldHVybiAoUmVhY3Q6IGFueSkuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICBhY2Nlc3NpYmxlOiB0aGlzLnByb3BzLmFjY2Vzc2libGUgIT09IGZhbHNlLFxuICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlMYWJlbCxcbiAgICAgIGFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlLFxuICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0czogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5VHJhaXRzLFxuICAgICAgbmF0aXZlSUQ6IHRoaXMucHJvcHMubmF0aXZlSUQsXG4gICAgICB0ZXN0SUQ6IHRoaXMucHJvcHMudGVzdElELFxuICAgICAgb25MYXlvdXQ6IHRoaXMucHJvcHMub25MYXlvdXQsXG4gICAgICBoaXRTbG9wOiB0aGlzLnByb3BzLmhpdFNsb3AsXG4gICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyOiB0aGlzLnRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyLFxuICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q6IHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0LFxuICAgICAgb25SZXNwb25kZXJHcmFudDogdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudCxcbiAgICAgIG9uUmVzcG9uZGVyTW92ZTogdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlLFxuICAgICAgb25SZXNwb25kZXJSZWxlYXNlOiB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2UsXG4gICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZTogdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUsXG4gICAgICBzdHlsZSxcbiAgICAgIGNoaWxkcmVuLFxuICAgIH0pO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2s7XG4iXX0=