688a574cca7d8726ab8fe4239a446a6c

'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var EdgeInsetsPropType = require('EdgeInsetsPropType');
var ImageResizeMode = require('ImageResizeMode');
var ImageSourcePropType = require('ImageSourcePropType');
var ImageStylePropTypes = require('ImageStylePropTypes');
var NativeMethodsMixin = require('NativeMethodsMixin');
var NativeModules = require('NativeModules');
var React = require('React');
var PropTypes = require('prop-types');
var ReactNativeViewAttributes = require('ReactNativeViewAttributes');
var StyleSheet = require('StyleSheet');
var StyleSheetPropType = require('StyleSheetPropType');

var createReactClass = require('create-react-class');
var flattenStyle = require('flattenStyle');
var requireNativeComponent = require('requireNativeComponent');
var resolveAssetSource = require('resolveAssetSource');

var ImageViewManager = NativeModules.ImageViewManager;

var Image = createReactClass({
  displayName: 'Image',
  propTypes: {
    style: StyleSheetPropType(ImageStylePropTypes),

    source: ImageSourcePropType,

    defaultSource: PropTypes.oneOfType([PropTypes.shape({
      uri: PropTypes.string,
      width: PropTypes.number,
      height: PropTypes.number,
      scale: PropTypes.number
    }), PropTypes.number]),

    accessible: PropTypes.bool,

    accessibilityLabel: PropTypes.node,

    blurRadius: PropTypes.number,

    capInsets: EdgeInsetsPropType,

    resizeMethod: PropTypes.oneOf(['auto', 'resize', 'scale']),

    resizeMode: PropTypes.oneOf(['cover', 'contain', 'stretch', 'repeat', 'center']),

    testID: PropTypes.string,

    onLayout: PropTypes.func,

    onLoadStart: PropTypes.func,

    onProgress: PropTypes.func,

    onError: PropTypes.func,

    onPartialLoad: PropTypes.func,

    onLoad: PropTypes.func,

    onLoadEnd: PropTypes.func
  },

  statics: {
    resizeMode: ImageResizeMode,

    getSize: function getSize(uri, success, failure) {
      ImageViewManager.getSize(uri, success, failure || function () {
        console.warn('Failed to get size for image: ' + uri);
      });
    },
    prefetch: function prefetch(url) {
      return ImageViewManager.prefetchImage(url);
    },

    resolveAssetSource: resolveAssetSource
  },

  mixins: [NativeMethodsMixin],

  viewConfig: {
    uiViewClassName: 'UIView',
    validAttributes: ReactNativeViewAttributes.UIView
  },

  render: function render() {
    var source = resolveAssetSource(this.props.source) || {
      uri: undefined,
      width: undefined,
      height: undefined
    };

    var sources = void 0;
    var style = void 0;
    if (Array.isArray(source)) {
      style = flattenStyle([styles.base, this.props.style]) || {};
      sources = source;
    } else {
      var _width = source.width,
          _height = source.height,
          uri = source.uri;

      style = flattenStyle([{ width: _width, height: _height }, styles.base, this.props.style]) || {};
      sources = [source];

      if (uri === '') {
        console.warn('source.uri should not be an empty string');
      }
    }

    var resizeMode = this.props.resizeMode || (style || {}).resizeMode || 'cover';
    var tintColor = (style || {}).tintColor;

    if (this.props.src) {
      console.warn('The <Image> component requires a `source` property rather than `src`.');
    }

    if (this.props.children) {
      throw new Error('The <Image> component cannot contain children. If you want to render content on top of the image, consider using the <ImageBackground> component or absolute positioning.');
    }

    return React.createElement(RCTImageView, _extends({}, this.props, {
      style: style,
      resizeMode: resizeMode,
      tintColor: tintColor,
      source: sources
    }));
  }
});

var styles = StyleSheet.create({
  base: {
    overflow: 'hidden'
  }
});

var RCTImageView = requireNativeComponent('RCTImageView', Image);

module.exports = Image;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkltYWdlLmlvcy5qcyJdLCJuYW1lcyI6WyJFZGdlSW5zZXRzUHJvcFR5cGUiLCJyZXF1aXJlIiwiSW1hZ2VSZXNpemVNb2RlIiwiSW1hZ2VTb3VyY2VQcm9wVHlwZSIsIkltYWdlU3R5bGVQcm9wVHlwZXMiLCJOYXRpdmVNZXRob2RzTWl4aW4iLCJOYXRpdmVNb2R1bGVzIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJSZWFjdE5hdGl2ZVZpZXdBdHRyaWJ1dGVzIiwiU3R5bGVTaGVldCIsIlN0eWxlU2hlZXRQcm9wVHlwZSIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJmbGF0dGVuU3R5bGUiLCJyZXF1aXJlTmF0aXZlQ29tcG9uZW50IiwicmVzb2x2ZUFzc2V0U291cmNlIiwiSW1hZ2VWaWV3TWFuYWdlciIsIkltYWdlIiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJzdHlsZSIsInNvdXJjZSIsImRlZmF1bHRTb3VyY2UiLCJvbmVPZlR5cGUiLCJzaGFwZSIsInVyaSIsInN0cmluZyIsIndpZHRoIiwibnVtYmVyIiwiaGVpZ2h0Iiwic2NhbGUiLCJhY2Nlc3NpYmxlIiwiYm9vbCIsImFjY2Vzc2liaWxpdHlMYWJlbCIsIm5vZGUiLCJibHVyUmFkaXVzIiwiY2FwSW5zZXRzIiwicmVzaXplTWV0aG9kIiwib25lT2YiLCJyZXNpemVNb2RlIiwidGVzdElEIiwib25MYXlvdXQiLCJmdW5jIiwib25Mb2FkU3RhcnQiLCJvblByb2dyZXNzIiwib25FcnJvciIsIm9uUGFydGlhbExvYWQiLCJvbkxvYWQiLCJvbkxvYWRFbmQiLCJzdGF0aWNzIiwiZ2V0U2l6ZSIsInN1Y2Nlc3MiLCJmYWlsdXJlIiwiY29uc29sZSIsIndhcm4iLCJwcmVmZXRjaCIsInVybCIsInByZWZldGNoSW1hZ2UiLCJtaXhpbnMiLCJ2aWV3Q29uZmlnIiwidWlWaWV3Q2xhc3NOYW1lIiwidmFsaWRBdHRyaWJ1dGVzIiwiVUlWaWV3IiwicmVuZGVyIiwicHJvcHMiLCJ1bmRlZmluZWQiLCJzb3VyY2VzIiwiQXJyYXkiLCJpc0FycmF5Iiwic3R5bGVzIiwiYmFzZSIsInRpbnRDb2xvciIsInNyYyIsImNoaWxkcmVuIiwiRXJyb3IiLCJjcmVhdGUiLCJvdmVyZmxvdyIsIlJDVEltYWdlVmlldyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7QUFVQTs7OztBQUVBLElBQU1BLHFCQUFxQkMsUUFBUSxvQkFBUixDQUEzQjtBQUNBLElBQU1DLGtCQUFrQkQsUUFBUSxpQkFBUixDQUF4QjtBQUNBLElBQU1FLHNCQUFzQkYsUUFBUSxxQkFBUixDQUE1QjtBQUNBLElBQU1HLHNCQUFzQkgsUUFBUSxxQkFBUixDQUE1QjtBQUNBLElBQU1JLHFCQUFxQkosUUFBUSxvQkFBUixDQUEzQjtBQUNBLElBQU1LLGdCQUFnQkwsUUFBUSxlQUFSLENBQXRCO0FBQ0EsSUFBTU0sUUFBUU4sUUFBUSxPQUFSLENBQWQ7QUFDQSxJQUFNTyxZQUFZUCxRQUFRLFlBQVIsQ0FBbEI7QUFDQSxJQUFNUSw0QkFBNEJSLFFBQVEsMkJBQVIsQ0FBbEM7QUFDQSxJQUFNUyxhQUFhVCxRQUFRLFlBQVIsQ0FBbkI7QUFDQSxJQUFNVSxxQkFBcUJWLFFBQVEsb0JBQVIsQ0FBM0I7O0FBRUEsSUFBTVcsbUJBQW1CWCxRQUFRLG9CQUFSLENBQXpCO0FBQ0EsSUFBTVksZUFBZVosUUFBUSxjQUFSLENBQXJCO0FBQ0EsSUFBTWEseUJBQXlCYixRQUFRLHdCQUFSLENBQS9CO0FBQ0EsSUFBTWMscUJBQXFCZCxRQUFRLG9CQUFSLENBQTNCOztBQUVBLElBQU1lLG1CQUFtQlYsY0FBY1UsZ0JBQXZDOztBQVNBLElBQU1DLFFBQVFMLGlCQUFpQjtBQUM3Qk0sZUFBYSxPQURnQjtBQUU3QkMsYUFBVztBQUlUQyxXQUFPVCxtQkFBbUJQLG1CQUFuQixDQUpFOztBQVVUaUIsWUFBUWxCLG1CQVZDOztBQWdCVG1CLG1CQUFlZCxVQUFVZSxTQUFWLENBQW9CLENBQ2pDZixVQUFVZ0IsS0FBVixDQUFnQjtBQUNkQyxXQUFLakIsVUFBVWtCLE1BREQ7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QixVQUFYLElBQXlCLENBQUNuQixTQUFTLEVBQVYsRUFBY21CLFVBQXZDLElBQXFELE9BRHZEO0FBRUEsUUFBTWdDLFlBQVksQ0FBQ25ELFNBQVMsRUFBVixFQUFjbUQsU0FBaEM7O0FBRUEsUUFBSSxLQUFLUCxLQUFMLENBQVdRLEdBQWYsRUFBb0I7QUFDbEJuQixjQUFRQyxJQUFSLENBQ0UsdUVBREY7QUFHRDs7QUFFRCxRQUFJLEtBQUtVLEtBQUwsQ0FBV1MsUUFBZixFQUF5QjtBQUN2QixZQUFNLElBQUlDLEtBQUosQ0FDSiwyS0FESSxDQUFOO0FBR0Q7O0FBRUQsV0FDRSxvQkFBQyxZQUFELGVBQ00sS0FBS1YsS0FEWDtBQUVFLGFBQU81QyxLQUZUO0FBR0Usa0JBQVltQixVQUhkO0FBSUUsaUJBQVdnQyxTQUpiO0FBS0UsY0FBUUw7QUFMVixPQURGO0FBU0Q7QUF4TjRCLENBQWpCLENBQWQ7O0FBMk5BLElBQU1HLFNBQVMzRCxXQUFXaUUsTUFBWCxDQUFrQjtBQUMvQkwsUUFBTTtBQUNKTSxjQUFVO0FBRE47QUFEeUIsQ0FBbEIsQ0FBZjs7QUFNQSxJQUFNQyxlQUFlL0QsdUJBQXVCLGNBQXZCLEVBQXVDRyxLQUF2QyxDQUFyQjs7QUFFQTZELE9BQU9DLE9BQVAsR0FBaUI5RCxLQUFqQiIsImZpbGUiOiJJbWFnZS5pb3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBJbWFnZVxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBFZGdlSW5zZXRzUHJvcFR5cGUgPSByZXF1aXJlKCdFZGdlSW5zZXRzUHJvcFR5cGUnKTtcbmNvbnN0IEltYWdlUmVzaXplTW9kZSA9IHJlcXVpcmUoJ0ltYWdlUmVzaXplTW9kZScpO1xuY29uc3QgSW1hZ2VTb3VyY2VQcm9wVHlwZSA9IHJlcXVpcmUoJ0ltYWdlU291cmNlUHJvcFR5cGUnKTtcbmNvbnN0IEltYWdlU3R5bGVQcm9wVHlwZXMgPSByZXF1aXJlKCdJbWFnZVN0eWxlUHJvcFR5cGVzJyk7XG5jb25zdCBOYXRpdmVNZXRob2RzTWl4aW4gPSByZXF1aXJlKCdOYXRpdmVNZXRob2RzTWl4aW4nKTtcbmNvbnN0IE5hdGl2ZU1vZHVsZXMgPSByZXF1aXJlKCdOYXRpdmVNb2R1bGVzJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ1JlYWN0Jyk7XG5jb25zdCBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5jb25zdCBSZWFjdE5hdGl2ZVZpZXdBdHRyaWJ1dGVzID0gcmVxdWlyZSgnUmVhY3ROYXRpdmVWaWV3QXR0cmlidXRlcycpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJ1N0eWxlU2hlZXQnKTtcbmNvbnN0IFN0eWxlU2hlZXRQcm9wVHlwZSA9IHJlcXVpcmUoJ1N0eWxlU2hlZXRQcm9wVHlwZScpO1xuXG5jb25zdCBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5jb25zdCBmbGF0dGVuU3R5bGUgPSByZXF1aXJlKCdmbGF0dGVuU3R5bGUnKTtcbmNvbnN0IHJlcXVpcmVOYXRpdmVDb21wb25lbnQgPSByZXF1aXJlKCdyZXF1aXJlTmF0aXZlQ29tcG9uZW50Jyk7XG5jb25zdCByZXNvbHZlQXNzZXRTb3VyY2UgPSByZXF1aXJlKCdyZXNvbHZlQXNzZXRTb3VyY2UnKTtcblxuY29uc3QgSW1hZ2VWaWV3TWFuYWdlciA9IE5hdGl2ZU1vZHVsZXMuSW1hZ2VWaWV3TWFuYWdlcjtcblxuLyoqXG4gKiBBIFJlYWN0IGNvbXBvbmVudCBmb3IgZGlzcGxheWluZyBkaWZmZXJlbnQgdHlwZXMgb2YgaW1hZ2VzLFxuICogaW5jbHVkaW5nIG5ldHdvcmsgaW1hZ2VzLCBzdGF0aWMgcmVzb3VyY2VzLCB0ZW1wb3JhcnkgbG9jYWwgaW1hZ2VzLCBhbmRcbiAqIGltYWdlcyBmcm9tIGxvY2FsIGRpc2ssIHN1Y2ggYXMgdGhlIGNhbWVyYSByb2xsLlxuICpcbiAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9pbWFnZS5odG1sXG4gKi9cbmNvbnN0IEltYWdlID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnSW1hZ2UnLFxuICBwcm9wVHlwZXM6IHtcbiAgICAvKipcbiAgICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvaW1hZ2UuaHRtbCNzdHlsZVxuICAgICAqL1xuICAgIHN0eWxlOiBTdHlsZVNoZWV0UHJvcFR5cGUoSW1hZ2VTdHlsZVByb3BUeXBlcyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIHNvdXJjZSAoZWl0aGVyIGEgcmVtb3RlIFVSTCBvciBhIGxvY2FsIGZpbGUgcmVzb3VyY2UpLlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjc291cmNlXG4gICAgICovXG4gICAgc291cmNlOiBJbWFnZVNvdXJjZVByb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIEEgc3RhdGljIGltYWdlIHRvIGRpc3BsYXkgd2hpbGUgbG9hZGluZyB0aGUgaW1hZ2Ugc291cmNlLlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjZGVmYXVsdHNvdXJjZVxuICAgICAqL1xuICAgIGRlZmF1bHRTb3VyY2U6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgdXJpOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgICAgICAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICBzY2FsZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICAgIH0pLFxuICAgICAgUHJvcFR5cGVzLm51bWJlcixcbiAgICBdKSxcbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIGluZGljYXRlcyB0aGUgaW1hZ2UgaXMgYW4gYWNjZXNzaWJpbGl0eSBlbGVtZW50LlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjYWNjZXNzaWJsZVxuICAgICAqL1xuICAgIGFjY2Vzc2libGU6IFByb3BUeXBlcy5ib29sLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IHRoYXQncyByZWFkIGJ5IHRoZSBzY3JlZW4gcmVhZGVyIHdoZW4gdGhlIHVzZXIgaW50ZXJhY3RzIHdpdGhcbiAgICAgKiB0aGUgaW1hZ2UuXG4gICAgICpcbiAgICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvaW1hZ2UuaHRtbCNhY2Nlc3NpYmlsaXR5bGFiZWxcbiAgICAgKi9cbiAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IFByb3BUeXBlcy5ub2RlLFxuICAgIC8qKlxuICAgICAqIGJsdXJSYWRpdXM6IHRoZSBibHVyIHJhZGl1cyBvZiB0aGUgYmx1ciBmaWx0ZXIgYWRkZWQgdG8gdGhlIGltYWdlXG4gICAgICpcbiAgICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvaW1hZ2UuaHRtbCNibHVycmFkaXVzXG4gICAgICovXG4gICAgYmx1clJhZGl1czogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvaW1hZ2UuaHRtbCNjYXBpbnNldHNcbiAgICAgKi9cbiAgICBjYXBJbnNldHM6IEVkZ2VJbnNldHNQcm9wVHlwZSxcbiAgICAvKipcbiAgICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvaW1hZ2UuaHRtbCNyZXNpemVtZXRob2RcbiAgICAgKi9cbiAgICByZXNpemVNZXRob2Q6IFByb3BUeXBlcy5vbmVPZihbJ2F1dG8nLCAncmVzaXplJywgJ3NjYWxlJ10pLFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaG93IHRvIHJlc2l6ZSB0aGUgaW1hZ2Ugd2hlbiB0aGUgZnJhbWUgZG9lc24ndCBtYXRjaCB0aGUgcmF3XG4gICAgICogaW1hZ2UgZGltZW5zaW9ucy5cbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9pbWFnZS5odG1sI3Jlc2l6ZW1vZGVcbiAgICAgKi9cbiAgICByZXNpemVNb2RlOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgJ2NvdmVyJyxcbiAgICAgICdjb250YWluJyxcbiAgICAgICdzdHJldGNoJyxcbiAgICAgICdyZXBlYXQnLFxuICAgICAgJ2NlbnRlcicsXG4gICAgXSksXG4gICAgLyoqXG4gICAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBlbGVtZW50IHRvIGJlIHVzZWQgaW4gVUkgQXV0b21hdGlvblxuICAgICAqIHRlc3Rpbmcgc2NyaXB0cy5cbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9pbWFnZS5odG1sI3Rlc3RpZFxuICAgICAqL1xuICAgIHRlc3RJRDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIG1vdW50IGFuZCBsYXlvdXQgY2hhbmdlcyB3aXRoXG4gICAgICogYHtuYXRpdmVFdmVudDoge2xheW91dDoge3gsIHksIHdpZHRoLCBoZWlnaHR9fX1gLlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjb25sYXlvdXRcbiAgICAgKi9cbiAgICBvbkxheW91dDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogSW52b2tlZCBvbiBsb2FkIHN0YXJ0LlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjb25sb2Fkc3RhcnRcbiAgICAgKi9cbiAgICBvbkxvYWRTdGFydDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogSW52b2tlZCBvbiBkb3dubG9hZCBwcm9ncmVzcyB3aXRoIGB7bmF0aXZlRXZlbnQ6IHtsb2FkZWQsIHRvdGFsfX1gLlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjb25wcm9ncmVzc1xuICAgICAqL1xuICAgIG9uUHJvZ3Jlc3M6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb24gbG9hZCBlcnJvciB3aXRoIGB7bmF0aXZlRXZlbnQ6IHtlcnJvcn19YC5cbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9pbWFnZS5odG1sI29uZXJyb3JcbiAgICAgKi9cbiAgICBvbkVycm9yOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gYSBwYXJ0aWFsIGxvYWQgb2YgdGhlIGltYWdlIGlzIGNvbXBsZXRlLlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjb25wYXJ0aWFsbG9hZFxuICAgICAqL1xuICAgIG9uUGFydGlhbExvYWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbiBsb2FkIGNvbXBsZXRlcyBzdWNjZXNzZnVsbHkuXG4gICAgICpcbiAgICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvaW1hZ2UuaHRtbCNvbmxvYWRcbiAgICAgKi9cbiAgICBvbkxvYWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbiBsb2FkIGVpdGhlciBzdWNjZWVkcyBvciBmYWlscy5cbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9pbWFnZS5odG1sI29ubG9hZGVuZFxuICAgICAqL1xuICAgIG9uTG9hZEVuZDogUHJvcFR5cGVzLmZ1bmMsXG4gIH0sXG5cbiAgc3RhdGljczoge1xuICAgIHJlc2l6ZU1vZGU6IEltYWdlUmVzaXplTW9kZSxcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgd2lkdGggYW5kIGhlaWdodCAoaW4gcGl4ZWxzKSBvZiBhbiBpbWFnZSBwcmlvciB0byBkaXNwbGF5aW5nIGl0LlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjZ2V0c2l6ZVxuICAgICAqL1xuICAgIGdldFNpemU6IGZ1bmN0aW9uKFxuICAgICAgdXJpOiBzdHJpbmcsXG4gICAgICBzdWNjZXNzOiAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IHZvaWQsXG4gICAgICBmYWlsdXJlPzogKGVycm9yOiBhbnkpID0+IHZvaWQsXG4gICAgKSB7XG4gICAgICBJbWFnZVZpZXdNYW5hZ2VyLmdldFNpemUoXG4gICAgICAgIHVyaSxcbiAgICAgICAgc3VjY2VzcyxcbiAgICAgICAgZmFpbHVyZSB8fFxuICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZ2V0IHNpemUgZm9yIGltYWdlOiAnICsgdXJpKTtcbiAgICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFByZWZldGNoZXMgYSByZW1vdGUgaW1hZ2UgZm9yIGxhdGVyIHVzZSBieSBkb3dubG9hZGluZyBpdCB0byB0aGUgZGlza1xuICAgICAqIGNhY2hlLlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjcHJlZmV0Y2hcbiAgICAgKi9cbiAgICBwcmVmZXRjaCh1cmw6IHN0cmluZykge1xuICAgICAgcmV0dXJuIEltYWdlVmlld01hbmFnZXIucHJlZmV0Y2hJbWFnZSh1cmwpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVzb2x2ZXMgYW4gYXNzZXQgcmVmZXJlbmNlIGludG8gYW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2ltYWdlLmh0bWwjcmVzb2x2ZWFzc2V0c291cmNlXG4gICAgICovXG4gICAgcmVzb2x2ZUFzc2V0U291cmNlOiByZXNvbHZlQXNzZXRTb3VyY2UsXG4gIH0sXG5cbiAgbWl4aW5zOiBbTmF0aXZlTWV0aG9kc01peGluXSxcblxuICAvKipcbiAgICogYE5hdGl2ZU1ldGhvZHNNaXhpbmAgd2lsbCBsb29rIGZvciB0aGlzIHdoZW4gaW52b2tpbmcgYHNldE5hdGl2ZVByb3BzYC4gV2VcbiAgICogbWFrZSBgdGhpc2AgbG9vayBsaWtlIGFuIGFjdHVhbCBuYXRpdmUgY29tcG9uZW50IGNsYXNzLlxuICAgKi9cbiAgdmlld0NvbmZpZzoge1xuICAgIHVpVmlld0NsYXNzTmFtZTogJ1VJVmlldycsXG4gICAgdmFsaWRBdHRyaWJ1dGVzOiBSZWFjdE5hdGl2ZVZpZXdBdHRyaWJ1dGVzLlVJVmlldyxcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHNvdXJjZSA9IHJlc29sdmVBc3NldFNvdXJjZSh0aGlzLnByb3BzLnNvdXJjZSkgfHwge1xuICAgICAgdXJpOiB1bmRlZmluZWQsXG4gICAgICB3aWR0aDogdW5kZWZpbmVkLFxuICAgICAgaGVpZ2h0OiB1bmRlZmluZWQsXG4gICAgfTtcblxuICAgIGxldCBzb3VyY2VzO1xuICAgIGxldCBzdHlsZTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICBzdHlsZSA9IGZsYXR0ZW5TdHlsZShbc3R5bGVzLmJhc2UsIHRoaXMucHJvcHMuc3R5bGVdKSB8fCB7fTtcbiAgICAgIHNvdXJjZXMgPSBzb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHt3aWR0aCwgaGVpZ2h0LCB1cml9ID0gc291cmNlO1xuICAgICAgc3R5bGUgPVxuICAgICAgICBmbGF0dGVuU3R5bGUoW3t3aWR0aCwgaGVpZ2h0fSwgc3R5bGVzLmJhc2UsIHRoaXMucHJvcHMuc3R5bGVdKSB8fCB7fTtcbiAgICAgIHNvdXJjZXMgPSBbc291cmNlXTtcblxuICAgICAgaWYgKHVyaSA9PT0gJycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdzb3VyY2UudXJpIHNob3VsZCBub3QgYmUgYW4gZW1wdHkgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVzaXplTW9kZSA9XG4gICAgICB0aGlzLnByb3BzLnJlc2l6ZU1vZGUgfHwgKHN0eWxlIHx8IHt9KS5yZXNpemVNb2RlIHx8ICdjb3Zlcic7IC8vIFdvcmthcm91bmQgZm9yIGZsb3cgYnVnIHQ3NzM3MTA4XG4gICAgY29uc3QgdGludENvbG9yID0gKHN0eWxlIHx8IHt9KS50aW50Q29sb3I7IC8vIFdvcmthcm91bmQgZm9yIGZsb3cgYnVnIHQ3NzM3MTA4XG5cbiAgICBpZiAodGhpcy5wcm9wcy5zcmMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1RoZSA8SW1hZ2U+IGNvbXBvbmVudCByZXF1aXJlcyBhIGBzb3VyY2VgIHByb3BlcnR5IHJhdGhlciB0aGFuIGBzcmNgLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmNoaWxkcmVuKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGUgPEltYWdlPiBjb21wb25lbnQgY2Fubm90IGNvbnRhaW4gY2hpbGRyZW4uIElmIHlvdSB3YW50IHRvIHJlbmRlciBjb250ZW50IG9uIHRvcCBvZiB0aGUgaW1hZ2UsIGNvbnNpZGVyIHVzaW5nIHRoZSA8SW1hZ2VCYWNrZ3JvdW5kPiBjb21wb25lbnQgb3IgYWJzb2x1dGUgcG9zaXRpb25pbmcuJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxSQ1RJbWFnZVZpZXdcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgcmVzaXplTW9kZT17cmVzaXplTW9kZX1cbiAgICAgICAgdGludENvbG9yPXt0aW50Q29sb3J9XG4gICAgICAgIHNvdXJjZT17c291cmNlc31cbiAgICAgIC8+XG4gICAgKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGJhc2U6IHtcbiAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gIH0sXG59KTtcblxuY29uc3QgUkNUSW1hZ2VWaWV3ID0gcmVxdWlyZU5hdGl2ZUNvbXBvbmVudCgnUkNUSW1hZ2VWaWV3JywgSW1hZ2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEltYWdlO1xuIl19