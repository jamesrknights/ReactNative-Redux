ffd5ed44a430b8ad7b64226691b7fb35

'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var Animated = require('Animated');
var Easing = require('Easing');
var NativeMethodsMixin = require('NativeMethodsMixin');
var React = require('React');
var PropTypes = require('prop-types');
var TimerMixin = require('react-timer-mixin');
var Touchable = require('Touchable');
var TouchableWithoutFeedback = require('TouchableWithoutFeedback');

var createReactClass = require('create-react-class');
var ensurePositiveDelayProps = require('ensurePositiveDelayProps');
var flattenStyle = require('flattenStyle');

var PRESS_RETENTION_OFFSET = { top: 20, left: 20, right: 20, bottom: 30 };

var TouchableOpacity = createReactClass({
  displayName: 'TouchableOpacity',
  mixins: [TimerMixin, Touchable.Mixin, NativeMethodsMixin],

  propTypes: _extends({}, TouchableWithoutFeedback.propTypes, {
    activeOpacity: PropTypes.number,

    hasTVPreferredFocus: PropTypes.bool,

    tvParallaxProperties: PropTypes.object
  }),

  getDefaultProps: function getDefaultProps() {
    return {
      activeOpacity: 0.2
    };
  },

  getInitialState: function getInitialState() {
    return _extends({}, this.touchableGetInitialState(), {
      anim: new Animated.Value(this._getChildStyleOpacityWithDefault())
    });
  },

  componentDidMount: function componentDidMount() {
    ensurePositiveDelayProps(this.props);
  },

  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    ensurePositiveDelayProps(nextProps);
  },

  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {
    if (this.props.disabled !== prevProps.disabled) {
      this._opacityInactive(250);
    }
  },

  setOpacityTo: function setOpacityTo(value, duration) {
    Animated.timing(this.state.anim, {
      toValue: value,
      duration: duration,
      easing: Easing.inOut(Easing.quad),
      useNativeDriver: true
    }).start();
  },

  touchableHandleActivePressIn: function touchableHandleActivePressIn(e) {
    if (e.dispatchConfig.registrationName === 'onResponderGrant') {
      this._opacityActive(0);
    } else {
      this._opacityActive(150);
    }
    this.props.onPressIn && this.props.onPressIn(e);
  },

  touchableHandleActivePressOut: function touchableHandleActivePressOut(e) {
    this._opacityInactive(250);
    this.props.onPressOut && this.props.onPressOut(e);
  },

  touchableHandlePress: function touchableHandlePress(e) {
    this.props.onPress && this.props.onPress(e);
  },

  touchableHandleLongPress: function touchableHandleLongPress(e) {
    this.props.onLongPress && this.props.onLongPress(e);
  },

  touchableGetPressRectOffset: function touchableGetPressRectOffset() {
    return this.props.pressRetentionOffset || PRESS_RETENTION_OFFSET;
  },

  touchableGetHitSlop: function touchableGetHitSlop() {
    return this.props.hitSlop;
  },

  touchableGetHighlightDelayMS: function touchableGetHighlightDelayMS() {
    return this.props.delayPressIn || 0;
  },

  touchableGetLongPressDelayMS: function touchableGetLongPressDelayMS() {
    return this.props.delayLongPress === 0 ? 0 : this.props.delayLongPress || 500;
  },

  touchableGetPressOutDelayMS: function touchableGetPressOutDelayMS() {
    return this.props.delayPressOut;
  },

  _opacityActive: function _opacityActive(duration) {
    this.setOpacityTo(this.props.activeOpacity, duration);
  },

  _opacityInactive: function _opacityInactive(duration) {
    this.setOpacityTo(this._getChildStyleOpacityWithDefault(), duration);
  },

  _getChildStyleOpacityWithDefault: function _getChildStyleOpacityWithDefault() {
    var childStyle = flattenStyle(this.props.style) || {};
    return childStyle.opacity == undefined ? 1 : childStyle.opacity;
  },

  render: function render() {
    return React.createElement(
      Animated.View,
      {
        accessible: this.props.accessible !== false,
        accessibilityLabel: this.props.accessibilityLabel,
        accessibilityComponentType: this.props.accessibilityComponentType,
        accessibilityTraits: this.props.accessibilityTraits,
        style: [this.props.style, { opacity: this.state.anim }],
        nativeID: this.props.nativeID,
        testID: this.props.testID,
        onLayout: this.props.onLayout,
        isTVSelectable: true,
        hasTVPreferredFocus: this.props.hasTVPreferredFocus,
        tvParallaxProperties: this.props.tvParallaxProperties,
        hitSlop: this.props.hitSlop,
        onStartShouldSetResponder: this.touchableHandleStartShouldSetResponder,
        onResponderTerminationRequest: this.touchableHandleResponderTerminationRequest,
        onResponderGrant: this.touchableHandleResponderGrant,
        onResponderMove: this.touchableHandleResponderMove,
        onResponderRelease: this.touchableHandleResponderRelease,
        onResponderTerminate: this.touchableHandleResponderTerminate },
      this.props.children,
      Touchable.renderDebugView({ color: 'cyan', hitSlop: this.props.hitSlop })
    );
  }
});

module.exports = TouchableOpacity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZU9wYWNpdHkuanMiXSwibmFtZXMiOlsiQW5pbWF0ZWQiLCJyZXF1aXJlIiwiRWFzaW5nIiwiTmF0aXZlTWV0aG9kc01peGluIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJUaW1lck1peGluIiwiVG91Y2hhYmxlIiwiVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIiwiY3JlYXRlUmVhY3RDbGFzcyIsImVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyIsImZsYXR0ZW5TdHlsZSIsIlBSRVNTX1JFVEVOVElPTl9PRkZTRVQiLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJUb3VjaGFibGVPcGFjaXR5IiwiZGlzcGxheU5hbWUiLCJtaXhpbnMiLCJNaXhpbiIsInByb3BUeXBlcyIsImFjdGl2ZU9wYWNpdHkiLCJudW1iZXIiLCJoYXNUVlByZWZlcnJlZEZvY3VzIiwiYm9vbCIsInR2UGFyYWxsYXhQcm9wZXJ0aWVzIiwib2JqZWN0IiwiZ2V0RGVmYXVsdFByb3BzIiwiZ2V0SW5pdGlhbFN0YXRlIiwidG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlIiwiYW5pbSIsIlZhbHVlIiwiX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQiLCJjb21wb25lbnREaWRNb3VudCIsInByb3BzIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJkaXNhYmxlZCIsIl9vcGFjaXR5SW5hY3RpdmUiLCJzZXRPcGFjaXR5VG8iLCJ2YWx1ZSIsImR1cmF0aW9uIiwidGltaW5nIiwic3RhdGUiLCJ0b1ZhbHVlIiwiZWFzaW5nIiwiaW5PdXQiLCJxdWFkIiwidXNlTmF0aXZlRHJpdmVyIiwic3RhcnQiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwiZSIsImRpc3BhdGNoQ29uZmlnIiwicmVnaXN0cmF0aW9uTmFtZSIsIl9vcGFjaXR5QWN0aXZlIiwib25QcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJvblByZXNzT3V0IiwidG91Y2hhYmxlSGFuZGxlUHJlc3MiLCJvblByZXNzIiwidG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzIiwib25Mb25nUHJlc3MiLCJ0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQiLCJwcmVzc1JldGVudGlvbk9mZnNldCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJoaXRTbG9wIiwidG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUyIsImRlbGF5UHJlc3NJbiIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJkZWxheUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsImRlbGF5UHJlc3NPdXQiLCJjaGlsZFN0eWxlIiwic3R5bGUiLCJvcGFjaXR5IiwidW5kZWZpbmVkIiwicmVuZGVyIiwiYWNjZXNzaWJsZSIsImFjY2Vzc2liaWxpdHlMYWJlbCIsImFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlIiwiYWNjZXNzaWJpbGl0eVRyYWl0cyIsIm5hdGl2ZUlEIiwidGVzdElEIiwib25MYXlvdXQiLCJ0b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlciIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2UiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUiLCJjaGlsZHJlbiIsInJlbmRlckRlYnVnVmlldyIsImNvbG9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjtBQVNBOzs7O0FBSUEsSUFBTUEsV0FBV0MsUUFBUSxVQUFSLENBQWpCO0FBQ0EsSUFBTUMsU0FBU0QsUUFBUSxRQUFSLENBQWY7QUFDQSxJQUFNRSxxQkFBcUJGLFFBQVEsb0JBQVIsQ0FBM0I7QUFDQSxJQUFNRyxRQUFRSCxRQUFRLE9BQVIsQ0FBZDtBQUNBLElBQU1JLFlBQVlKLFFBQVEsWUFBUixDQUFsQjtBQUNBLElBQU1LLGFBQWFMLFFBQVEsbUJBQVIsQ0FBbkI7QUFDQSxJQUFNTSxZQUFZTixRQUFRLFdBQVIsQ0FBbEI7QUFDQSxJQUFNTywyQkFBMkJQLFFBQVEsMEJBQVIsQ0FBakM7O0FBRUEsSUFBTVEsbUJBQW1CUixRQUFRLG9CQUFSLENBQXpCO0FBQ0EsSUFBTVMsMkJBQTJCVCxRQUFRLDBCQUFSLENBQWpDO0FBQ0EsSUFBTVUsZUFBZVYsUUFBUSxjQUFSLENBQXJCOztBQUlBLElBQU1XLHlCQUF5QixFQUFDQyxLQUFLLEVBQU4sRUFBVUMsTUFBTSxFQUFoQixFQUFvQkMsT0FBTyxFQUEzQixFQUErQkMsUUFBUSxFQUF2QyxFQUEvQjs7QUEwRkEsSUFBTUMsbUJBQW1CUixpQkFBaUI7QUFDeENTLGVBQWEsa0JBRDJCO0FBRXhDQyxVQUFRLENBQUNiLFVBQUQsRUFBYUMsVUFBVWEsS0FBdkIsRUFBOEJqQixrQkFBOUIsQ0FGZ0M7O0FBSXhDa0IsMEJBQ0tiLHlCQUF5QmEsU0FEOUI7QUFNRUMsbUJBQWVqQixVQUFVa0IsTUFOM0I7O0FBVUVDLHlCQUFxQm5CLFVBQVVvQixJQVZqQzs7QUFjRUMsMEJBQXNCckIsVUFBVXNCO0FBZGxDLElBSndDOztBQXFCeENDLG1CQUFpQiwyQkFBVztBQUMxQixXQUFPO0FBQ0xOLHFCQUFlO0FBRFYsS0FBUDtBQUdELEdBekJ1Qzs7QUEyQnhDTyxtQkFBaUIsMkJBQVc7QUFDMUIsd0JBQ0ssS0FBS0Msd0JBQUwsRUFETDtBQUVFQyxZQUFNLElBQUkvQixTQUFTZ0MsS0FBYixDQUFtQixLQUFLQyxnQ0FBTCxFQUFuQjtBQUZSO0FBSUQsR0FoQ3VDOztBQWtDeENDLHFCQUFtQiw2QkFBVztBQUM1QnhCLDZCQUF5QixLQUFLeUIsS0FBOUI7QUFDRCxHQXBDdUM7O0FBc0N4Q0Msb0NBQWtDLDBDQUFTQyxTQUFULEVBQW9CO0FBQ3BEM0IsNkJBQXlCMkIsU0FBekI7QUFDRCxHQXhDdUM7O0FBMEN4Q0Msc0JBQW9CLDRCQUFTQyxTQUFULEVBQW9CQyxTQUFwQixFQUErQjtBQUNqRCxRQUFJLEtBQUtMLEtBQUwsQ0FBV00sUUFBWCxLQUF3QkYsVUFBVUUsUUFBdEMsRUFBZ0Q7QUFDOUMsV0FBS0MsZ0JBQUwsQ0FBc0IsR0FBdEI7QUFDRDtBQUNGLEdBOUN1Qzs7QUFtRHhDQyxnQkFBYyxzQkFBU0MsS0FBVCxFQUF3QkMsUUFBeEIsRUFBMEM7QUFDdEQ3QyxhQUFTOEMsTUFBVCxDQUNFLEtBQUtDLEtBQUwsQ0FBV2hCLElBRGIsRUFFRTtBQUNFaUIsZUFBU0osS0FEWDtBQUVFQyxnQkFBVUEsUUFGWjtBQUdFSSxjQUFRL0MsT0FBT2dELEtBQVAsQ0FBYWhELE9BQU9pRCxJQUFwQixDQUhWO0FBSUVDLHVCQUFpQjtBQUpuQixLQUZGLEVBUUVDLEtBUkY7QUFTRCxHQTdEdUM7O0FBbUV4Q0MsZ0NBQThCLHNDQUFTQyxDQUFULEVBQW1CO0FBQy9DLFFBQUlBLEVBQUVDLGNBQUYsQ0FBaUJDLGdCQUFqQixLQUFzQyxrQkFBMUMsRUFBOEQ7QUFDNUQsV0FBS0MsY0FBTCxDQUFvQixDQUFwQjtBQUNELEtBRkQsTUFFTztBQUNMLFdBQUtBLGNBQUwsQ0FBb0IsR0FBcEI7QUFDRDtBQUNELFNBQUt2QixLQUFMLENBQVd3QixTQUFYLElBQXdCLEtBQUt4QixLQUFMLENBQVd3QixTQUFYLENBQXFCSixDQUFyQixDQUF4QjtBQUNELEdBMUV1Qzs7QUE0RXhDSyxpQ0FBK0IsdUNBQVNMLENBQVQsRUFBbUI7QUFDaEQsU0FBS2IsZ0JBQUwsQ0FBc0IsR0FBdEI7QUFDQSxTQUFLUCxLQUFMLENBQVcwQixVQUFYLElBQXlCLEtBQUsxQixLQUFMLENBQVcwQixVQUFYLENBQXNCTixDQUF0QixDQUF6QjtBQUNELEdBL0V1Qzs7QUFpRnhDTyx3QkFBc0IsOEJBQVNQLENBQVQsRUFBbUI7QUFDdkMsU0FBS3BCLEtBQUwsQ0FBVzRCLE9BQVgsSUFBc0IsS0FBSzVCLEtBQUwsQ0FBVzRCLE9BQVgsQ0FBbUJSLENBQW5CLENBQXRCO0FBQ0QsR0FuRnVDOztBQXFGeENTLDRCQUEwQixrQ0FBU1QsQ0FBVCxFQUFtQjtBQUMzQyxTQUFLcEIsS0FBTCxDQUFXOEIsV0FBWCxJQUEwQixLQUFLOUIsS0FBTCxDQUFXOEIsV0FBWCxDQUF1QlYsQ0FBdkIsQ0FBMUI7QUFDRCxHQXZGdUM7O0FBeUZ4Q1csK0JBQTZCLHVDQUFXO0FBQ3RDLFdBQU8sS0FBSy9CLEtBQUwsQ0FBV2dDLG9CQUFYLElBQW1DdkQsc0JBQTFDO0FBQ0QsR0EzRnVDOztBQTZGeEN3RCx1QkFBcUIsK0JBQVc7QUFDOUIsV0FBTyxLQUFLakMsS0FBTCxDQUFXa0MsT0FBbEI7QUFDRCxHQS9GdUM7O0FBaUd4Q0MsZ0NBQThCLHdDQUFXO0FBQ3ZDLFdBQU8sS0FBS25DLEtBQUwsQ0FBV29DLFlBQVgsSUFBMkIsQ0FBbEM7QUFDRCxHQW5HdUM7O0FBcUd4Q0MsZ0NBQThCLHdDQUFXO0FBQ3ZDLFdBQU8sS0FBS3JDLEtBQUwsQ0FBV3NDLGNBQVgsS0FBOEIsQ0FBOUIsR0FBa0MsQ0FBbEMsR0FDTCxLQUFLdEMsS0FBTCxDQUFXc0MsY0FBWCxJQUE2QixHQUQvQjtBQUVELEdBeEd1Qzs7QUEwR3hDQywrQkFBNkIsdUNBQVc7QUFDdEMsV0FBTyxLQUFLdkMsS0FBTCxDQUFXd0MsYUFBbEI7QUFDRCxHQTVHdUM7O0FBOEd4Q2pCLGtCQUFnQix3QkFBU2IsUUFBVCxFQUEyQjtBQUN6QyxTQUFLRixZQUFMLENBQWtCLEtBQUtSLEtBQUwsQ0FBV2IsYUFBN0IsRUFBNEN1QixRQUE1QztBQUNELEdBaEh1Qzs7QUFrSHhDSCxvQkFBa0IsMEJBQVNHLFFBQVQsRUFBMkI7QUFDM0MsU0FBS0YsWUFBTCxDQUNFLEtBQUtWLGdDQUFMLEVBREYsRUFFRVksUUFGRjtBQUlELEdBdkh1Qzs7QUF5SHhDWixvQ0FBa0MsNENBQVc7QUFDNUMsUUFBTTJDLGFBQWFqRSxhQUFhLEtBQUt3QixLQUFMLENBQVcwQyxLQUF4QixLQUFrQyxFQUFyRDtBQUNBLFdBQU9ELFdBQVdFLE9BQVgsSUFBc0JDLFNBQXRCLEdBQWtDLENBQWxDLEdBQXNDSCxXQUFXRSxPQUF4RDtBQUNELEdBNUh3Qzs7QUE4SHhDRSxVQUFRLGtCQUFXO0FBQ2pCLFdBQ0U7QUFBQyxjQUFELENBQVUsSUFBVjtBQUFBO0FBQ0Usb0JBQVksS0FBSzdDLEtBQUwsQ0FBVzhDLFVBQVgsS0FBMEIsS0FEeEM7QUFFRSw0QkFBb0IsS0FBSzlDLEtBQUwsQ0FBVytDLGtCQUZqQztBQUdFLG9DQUE0QixLQUFLL0MsS0FBTCxDQUFXZ0QsMEJBSHpDO0FBSUUsNkJBQXFCLEtBQUtoRCxLQUFMLENBQVdpRCxtQkFKbEM7QUFLRSxlQUFPLENBQUMsS0FBS2pELEtBQUwsQ0FBVzBDLEtBQVosRUFBbUIsRUFBQ0MsU0FBUyxLQUFLL0IsS0FBTCxDQUFXaEIsSUFBckIsRUFBbkIsQ0FMVDtBQU1FLGtCQUFVLEtBQUtJLEtBQUwsQ0FBV2tELFFBTnZCO0FBT0UsZ0JBQVEsS0FBS2xELEtBQUwsQ0FBV21ELE1BUHJCO0FBUUUsa0JBQVUsS0FBS25ELEtBQUwsQ0FBV29ELFFBUnZCO0FBU0Usd0JBQWdCLElBVGxCO0FBVUUsNkJBQXFCLEtBQUtwRCxLQUFMLENBQVdYLG1CQVZsQztBQVdFLDhCQUFzQixLQUFLVyxLQUFMLENBQVdULG9CQVhuQztBQVlFLGlCQUFTLEtBQUtTLEtBQUwsQ0FBV2tDLE9BWnRCO0FBYUUsbUNBQTJCLEtBQUttQixzQ0FibEM7QUFjRSx1Q0FBK0IsS0FBS0MsMENBZHRDO0FBZUUsMEJBQWtCLEtBQUtDLDZCQWZ6QjtBQWdCRSx5QkFBaUIsS0FBS0MsNEJBaEJ4QjtBQWlCRSw0QkFBb0IsS0FBS0MsK0JBakIzQjtBQWtCRSw4QkFBc0IsS0FBS0MsaUNBbEI3QjtBQW1CRyxXQUFLMUQsS0FBTCxDQUFXMkQsUUFuQmQ7QUFvQkd2RixnQkFBVXdGLGVBQVYsQ0FBMEIsRUFBQ0MsT0FBTyxNQUFSLEVBQWdCM0IsU0FBUyxLQUFLbEMsS0FBTCxDQUFXa0MsT0FBcEMsRUFBMUI7QUFwQkgsS0FERjtBQXdCRDtBQXZKdUMsQ0FBakIsQ0FBekI7O0FBMEpBNEIsT0FBT0MsT0FBUCxHQUFpQmpGLGdCQUFqQiIsImZpbGUiOiJUb3VjaGFibGVPcGFjaXR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgVG91Y2hhYmxlT3BhY2l0eVxuICogQG5vZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIE5vdGUgKGF2aWspOiBhZGQgQGZsb3cgd2hlbiBGbG93IHN1cHBvcnRzIHNwcmVhZCBwcm9wZXJ0aWVzIGluIHByb3BUeXBlc1xuXG5jb25zdCBBbmltYXRlZCA9IHJlcXVpcmUoJ0FuaW1hdGVkJyk7XG5jb25zdCBFYXNpbmcgPSByZXF1aXJlKCdFYXNpbmcnKTtcbmNvbnN0IE5hdGl2ZU1ldGhvZHNNaXhpbiA9IHJlcXVpcmUoJ05hdGl2ZU1ldGhvZHNNaXhpbicpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdSZWFjdCcpO1xuY29uc3QgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuY29uc3QgVGltZXJNaXhpbiA9IHJlcXVpcmUoJ3JlYWN0LXRpbWVyLW1peGluJyk7XG5jb25zdCBUb3VjaGFibGUgPSByZXF1aXJlKCdUb3VjaGFibGUnKTtcbmNvbnN0IFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayA9IHJlcXVpcmUoJ1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaycpO1xuXG5jb25zdCBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5jb25zdCBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMgPSByZXF1aXJlKCdlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMnKTtcbmNvbnN0IGZsYXR0ZW5TdHlsZSA9IHJlcXVpcmUoJ2ZsYXR0ZW5TdHlsZScpO1xuXG50eXBlIEV2ZW50ID0gT2JqZWN0O1xuXG5jb25zdCBQUkVTU19SRVRFTlRJT05fT0ZGU0VUID0ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzB9O1xuXG4vKipcbiAqIEEgd3JhcHBlciBmb3IgbWFraW5nIHZpZXdzIHJlc3BvbmQgcHJvcGVybHkgdG8gdG91Y2hlcy5cbiAqIE9uIHByZXNzIGRvd24sIHRoZSBvcGFjaXR5IG9mIHRoZSB3cmFwcGVkIHZpZXcgaXMgZGVjcmVhc2VkLCBkaW1taW5nIGl0LlxuICpcbiAqIE9wYWNpdHkgaXMgY29udHJvbGxlZCBieSB3cmFwcGluZyB0aGUgY2hpbGRyZW4gaW4gYW4gQW5pbWF0ZWQuVmlldywgd2hpY2ggaXNcbiAqIGFkZGVkIHRvIHRoZSB2aWV3IGhpZWFyY2h5LiAgQmUgYXdhcmUgdGhhdCB0aGlzIGNhbiBhZmZlY3QgbGF5b3V0LlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiByZW5kZXJCdXR0b246IGZ1bmN0aW9uKCkge1xuICogICByZXR1cm4gKFxuICogICAgIDxUb3VjaGFibGVPcGFjaXR5IG9uUHJlc3M9e3RoaXMuX29uUHJlc3NCdXR0b259PlxuICogICAgICAgPEltYWdlXG4gKiAgICAgICAgIHN0eWxlPXtzdHlsZXMuYnV0dG9ufVxuICogICAgICAgICBzb3VyY2U9e3JlcXVpcmUoJy4vbXlCdXR0b24ucG5nJyl9XG4gKiAgICAgICAvPlxuICogICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cbiAqICAgKTtcbiAqIH0sXG4gKiBgYGBcbiAqICMjIyBFeGFtcGxlXG4gKlxuICogYGBgUmVhY3ROYXRpdmVXZWJQbGF5ZXJcbiAqIGltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbiAqIGltcG9ydCB7XG4gKiAgIEFwcFJlZ2lzdHJ5LFxuICogICBTdHlsZVNoZWV0LFxuICogICBUb3VjaGFibGVPcGFjaXR5LFxuICogICBUZXh0LFxuICogICBWaWV3LFxuICogfSBmcm9tICdyZWFjdC1uYXRpdmUnXG4gKlxuICogY2xhc3MgQXBwIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAqICAgICBzdXBlcihwcm9wcylcbiAqICAgICB0aGlzLnN0YXRlID0geyBjb3VudDogMCB9XG4gKiAgIH1cbiAqXG4gKiAgIG9uUHJlc3MgPSAoKSA9PiB7XG4gKiAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gKiAgICAgICBjb3VudDogdGhpcy5zdGF0ZS5jb3VudCsxXG4gKiAgICAgfSlcbiAqICAgfVxuICpcbiAqICByZW5kZXIoKSB7XG4gKiAgICByZXR1cm4gKFxuICogICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gKiAgICAgICAgPFRvdWNoYWJsZU9wYWNpdHlcbiAqICAgICAgICAgIHN0eWxlPXtzdHlsZXMuYnV0dG9ufVxuICogICAgICAgICAgb25QcmVzcz17dGhpcy5vblByZXNzfVxuICogICAgICAgID5cbiAqICAgICAgICAgIDxUZXh0PiBUb3VjaCBIZXJlIDwvVGV4dD5cbiAqICAgICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gKiAgICAgICAgPFZpZXcgc3R5bGU9e1tzdHlsZXMuY291bnRDb250YWluZXJdfT5cbiAqICAgICAgICAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLmNvdW50VGV4dF19PlxuICogICAgICAgICAgICAgeyB0aGlzLnN0YXRlLmNvdW50ICE9PSAwID8gdGhpcy5zdGF0ZS5jb3VudDogbnVsbH1cbiAqICAgICAgICAgICA8L1RleHQ+XG4gKiAgICAgICAgIDwvVmlldz5cbiAqICAgICAgIDwvVmlldz5cbiAqICAgICApXG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gKiAgIGNvbnRhaW5lcjoge1xuICogICAgIGZsZXg6IDEsXG4gKiAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICogICAgIHBhZGRpbmdIb3Jpem9udGFsOiAxMFxuICogICB9LFxuICogICBidXR0b246IHtcbiAqICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAqICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjREREREREJyxcbiAqICAgICBwYWRkaW5nOiAxMFxuICogICB9LFxuICogICBjb3VudENvbnRhaW5lcjoge1xuICogICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICogICAgIHBhZGRpbmc6IDEwXG4gKiAgIH0sXG4gKiAgIGNvdW50VGV4dDoge1xuICogICAgIGNvbG9yOiAnI0ZGMDBGRidcbiAqICAgfVxuICogfSlcbiAqXG4gKiBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudCgnQXBwJywgKCkgPT4gQXBwKVxuICogYGBgXG4gKlxuICovXG5jb25zdCBUb3VjaGFibGVPcGFjaXR5ID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVG91Y2hhYmxlT3BhY2l0eScsXG4gIG1peGluczogW1RpbWVyTWl4aW4sIFRvdWNoYWJsZS5NaXhpbiwgTmF0aXZlTWV0aG9kc01peGluXSxcblxuICBwcm9wVHlwZXM6IHtcbiAgICAuLi5Ub3VjaGFibGVXaXRob3V0RmVlZGJhY2sucHJvcFR5cGVzLFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hhdCB0aGUgb3BhY2l0eSBvZiB0aGUgd3JhcHBlZCB2aWV3IHNob3VsZCBiZSB3aGVuIHRvdWNoIGlzXG4gICAgICogYWN0aXZlLiBEZWZhdWx0cyB0byAwLjIuXG4gICAgICovXG4gICAgYWN0aXZlT3BhY2l0eTogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBUViBwcmVmZXJyZWQgZm9jdXMgKHNlZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgVmlldyBjb21wb25lbnQpLlxuICAgICAqL1xuICAgIGhhc1RWUHJlZmVycmVkRm9jdXM6IFByb3BUeXBlcy5ib29sLFxuICAgIC8qKlxuICAgICAqIEFwcGxlIFRWIHBhcmFsbGF4IGVmZmVjdHNcbiAgICAgKi9cbiAgICB0dlBhcmFsbGF4UHJvcGVydGllczogUHJvcFR5cGVzLm9iamVjdCxcbiAgfSxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3RpdmVPcGFjaXR5OiAwLjIsXG4gICAgfTtcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLFxuICAgICAgYW5pbTogbmV3IEFuaW1hdGVkLlZhbHVlKHRoaXMuX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQoKSksXG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzKHRoaXMucHJvcHMpO1xuICB9LFxuXG4gIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMpIHtcbiAgICBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMobmV4dFByb3BzKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZWQgIT09IHByZXZQcm9wcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5fb3BhY2l0eUluYWN0aXZlKDI1MCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHRoZSB0b3VjaGFibGUgdG8gYSBuZXcgb3BhY2l0eS5cbiAgICovXG4gIHNldE9wYWNpdHlUbzogZnVuY3Rpb24odmFsdWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xuICAgIEFuaW1hdGVkLnRpbWluZyhcbiAgICAgIHRoaXMuc3RhdGUuYW5pbSxcbiAgICAgIHtcbiAgICAgICAgdG9WYWx1ZTogdmFsdWUsXG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiBFYXNpbmcuaW5PdXQoRWFzaW5nLnF1YWQpLFxuICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICB9XG4gICAgKS5zdGFydCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBgVG91Y2hhYmxlLk1peGluYCBzZWxmIGNhbGxiYWNrcy4gVGhlIG1peGluIHdpbGwgaW52b2tlIHRoZXNlIGlmIHRoZXkgYXJlXG4gICAqIGRlZmluZWQgb24geW91ciBjb21wb25lbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIGlmIChlLmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUgPT09ICdvblJlc3BvbmRlckdyYW50Jykge1xuICAgICAgdGhpcy5fb3BhY2l0eUFjdGl2ZSgwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb3BhY2l0eUFjdGl2ZSgxNTApO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLm9uUHJlc3NJbiAmJiB0aGlzLnByb3BzLm9uUHJlc3NJbihlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb24oZTogRXZlbnQpIHtcbiAgICB0aGlzLl9vcGFjaXR5SW5hY3RpdmUoMjUwKTtcbiAgICB0aGlzLnByb3BzLm9uUHJlc3NPdXQgJiYgdGhpcy5wcm9wcy5vblByZXNzT3V0KGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25QcmVzcyAmJiB0aGlzLnByb3BzLm9uUHJlc3MoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25Mb25nUHJlc3MgJiYgdGhpcy5wcm9wcy5vbkxvbmdQcmVzcyhlKTtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLnByZXNzUmV0ZW50aW9uT2Zmc2V0IHx8IFBSRVNTX1JFVEVOVElPTl9PRkZTRVQ7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0SGl0U2xvcDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaGl0U2xvcDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheVByZXNzSW4gfHwgMDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheUxvbmdQcmVzcyA9PT0gMCA/IDAgOlxuICAgICAgdGhpcy5wcm9wcy5kZWxheUxvbmdQcmVzcyB8fCA1MDA7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheVByZXNzT3V0O1xuICB9LFxuXG4gIF9vcGFjaXR5QWN0aXZlOiBmdW5jdGlvbihkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRPcGFjaXR5VG8odGhpcy5wcm9wcy5hY3RpdmVPcGFjaXR5LCBkdXJhdGlvbik7XG4gIH0sXG5cbiAgX29wYWNpdHlJbmFjdGl2ZTogZnVuY3Rpb24oZHVyYXRpb246IG51bWJlcikge1xuICAgIHRoaXMuc2V0T3BhY2l0eVRvKFxuICAgICAgdGhpcy5fZ2V0Q2hpbGRTdHlsZU9wYWNpdHlXaXRoRGVmYXVsdCgpLFxuICAgICAgZHVyYXRpb25cbiAgICApO1xuICB9LFxuXG4gIF9nZXRDaGlsZFN0eWxlT3BhY2l0eVdpdGhEZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgIGNvbnN0IGNoaWxkU3R5bGUgPSBmbGF0dGVuU3R5bGUodGhpcy5wcm9wcy5zdHlsZSkgfHwge307XG4gICByZXR1cm4gY2hpbGRTdHlsZS5vcGFjaXR5ID09IHVuZGVmaW5lZCA/IDEgOiBjaGlsZFN0eWxlLm9wYWNpdHk7XG4gfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICBhY2Nlc3NpYmxlPXt0aGlzLnByb3BzLmFjY2Vzc2libGUgIT09IGZhbHNlfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUxhYmVsfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZT17dGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZX1cbiAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz17dGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5VHJhaXRzfVxuICAgICAgICBzdHlsZT17W3RoaXMucHJvcHMuc3R5bGUsIHtvcGFjaXR5OiB0aGlzLnN0YXRlLmFuaW19XX1cbiAgICAgICAgbmF0aXZlSUQ9e3RoaXMucHJvcHMubmF0aXZlSUR9XG4gICAgICAgIHRlc3RJRD17dGhpcy5wcm9wcy50ZXN0SUR9XG4gICAgICAgIG9uTGF5b3V0PXt0aGlzLnByb3BzLm9uTGF5b3V0fVxuICAgICAgICBpc1RWU2VsZWN0YWJsZT17dHJ1ZX1cbiAgICAgICAgaGFzVFZQcmVmZXJyZWRGb2N1cz17dGhpcy5wcm9wcy5oYXNUVlByZWZlcnJlZEZvY3VzfVxuICAgICAgICB0dlBhcmFsbGF4UHJvcGVydGllcz17dGhpcy5wcm9wcy50dlBhcmFsbGF4UHJvcGVydGllc31cbiAgICAgICAgaGl0U2xvcD17dGhpcy5wcm9wcy5oaXRTbG9wfVxuICAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyfVxuICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdD17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3R9XG4gICAgICAgIG9uUmVzcG9uZGVyR3JhbnQ9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnR9XG4gICAgICAgIG9uUmVzcG9uZGVyTW92ZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlfVxuICAgICAgICBvblJlc3BvbmRlclJlbGVhc2U9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZX1cbiAgICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlfT5cbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgIHtUb3VjaGFibGUucmVuZGVyRGVidWdWaWV3KHtjb2xvcjogJ2N5YW4nLCBoaXRTbG9wOiB0aGlzLnByb3BzLmhpdFNsb3B9KX1cbiAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICApO1xuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlT3BhY2l0eTtcbiJdfQ==