f978553ecb1b4b4521ecef95fccb8bb4
"use strict";

var __assign = this && this.__assign || function () {
  __assign = Object.assign || function (t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];

      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
    }

    return t;
  };

  return __assign.apply(this, arguments);
};

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Helper = {
  isNull: function (el) {
    var result = false;

    if (el === null || typeof el === 'undefined') {
      result = true;
    }

    return result;
  },
  parseLocation: function (location) {
    var result = null;

    if (!this.isNull(location)) {
      result = {
        lon: location.coords.longitude,
        lat: location.coords.latitude
      };
    } else {
      result = {
        lon: null,
        lat: null
      };
    }

    return result;
  },
  concatenate: function (delimiter, parts) {
    var result = "";

    if (!this.isNull(parts)) {
      parts.forEach(function (part, index) {
        result += part + delimiter;
      });
    }

    return result;
  },
  url_params: function (obj) {
    var result = "";

    if (!this.isNull(obj)) {
      result = Object.keys(obj).map(function (key) {
        return obj[key] instanceof Object ? key + '=' + JSON.stringify(obj[key]) : key + '=' + obj[key];
      }).join('&');
    }

    return result;
  },
  is_empty: function (str) {
    var result = false;

    if (this.isNull(str) || str === "" || !str) {
      result = true;
    }

    return result;
  },
  encode: function (str) {
    var result = "";

    if (!this.isNull(str)) {
      result = encodeURIComponent(str);
    }

    return result;
  },
  to_json: function (str) {
    var result = null;

    if (!this.isNull(str)) {
      result = JSON.parse('{"' + decodeURI(str).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}');
    }

    return result;
  },
  join_objects: function (first, second) {
    return __assign({}, first, second);
  },
  format_date: function (format, date) {
    var result = null;

    if (!this.is_empty(format) && !this.isNull(date)) {
      switch (format) {
        case "h:m":
          var tempMinutes = date.getMinutes();
          var mins = tempMinutes < 10 ? "0" + tempMinutes : tempMinutes;
          result = date.getHours() + ":" + mins;
          break;

        case "m":
          result = date.getMinutes();
          break;

        case "iso":
          result = date.toISOString();
          break;

        default:
          result = date.getHours() + ":" + date.getMinutes();
          break;
      }
    }

    return result;
  },
  get_time_difference: function (start, end) {
    console.log("date", start, end);
    var date_now = start.getTime();
    var date_future = end.getTime();
    var delta = Math.abs(date_future - date_now) / 1000; // calculate (and subtract) whole days

    var days = Math.floor(delta / 86400);
    delta -= days * 86400; // calculate (and subtract) whole hours

    var hours = Math.floor(delta / 3600) % 24;
    delta -= hours * 3600; // calculate (and subtract) whole minutes

    var minutes = Math.floor(delta / 60) % 60;
    delta -= minutes * 60;
    var mins = minutes < 10 ? '0' + minutes : minutes;
    var hrs = hours < 10 ? '0' + hours : hours;
    return hrs + ":" + mins;
  },
  add_interval: function (time, interval) {
    return this.format_date("h:m", new Date(time.getTime() + interval * 60000));
  },
  with_comma: function (first, second) {
    return first + ", " + second;
  },
  to_fixed: function (number) {
    var result = "0";

    if (!this.isNull(number)) {
      result = number.toFixed(7);
    }

    return result;
  },
  get_interval_value: function (language, chosen_interval) {
    var result = "";

    if (chosen_interval === 60) {
      // 1 hour
      result = "1" + language.time_unit_hour_label_single;
    } else if (chosen_interval === 120) {
      //2 hours
      result = "2" + language.time_unit_hour_label;
    } else {
      result = chosen_interval + language.time_unit_minute_label;
    }

    return result;
  }
}; //# sourceMappingURL=helper.js.map
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLLFdBQUwsQ0FBaUIsS0FBakIsRUFBd0IsSUFBSSxJQUFKLENBQVMsSUFBSSxDQUFDLE9BQUwsS0FBaUIsUUFBUSxHQUFDLEtBQW5DLENBQXhCLENBQVA7QUFDSCxHQTFIaUI7QUE2SGxCLEVBQUEsVUFBVSxFQUFBLFVBQUUsS0FBRixFQUFlLE1BQWYsRUFBMkI7QUFDakMsV0FBTyxLQUFLLEdBQUcsSUFBUixHQUFlLE1BQXRCO0FBQ0gsR0EvSGlCO0FBaUlsQixFQUFBLFFBQVEsRUFBUixVQUFVLE1BQVYsRUFBeUI7QUFDckIsUUFBSSxNQUFNLEdBQUcsR0FBYjs7QUFDQSxRQUFJLENBQUMsS0FBSyxNQUFMLENBQVksTUFBWixDQUFMLEVBQTBCO0FBQ3RCLE1BQUEsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFQLENBQWUsQ0FBZixDQUFUO0FBQ0g7O0FBQ0QsV0FBTyxNQUFQO0FBQ0gsR0F2SWlCO0FBeUlsQixFQUFBLGtCQUFrQixFQUFsQixVQUFxQixRQUFyQixFQUFxQyxlQUFyQyxFQUE2RDtBQUN6RCxRQUFJLE1BQU0sR0FBRyxFQUFiOztBQUNBLFFBQUksZUFBZSxLQUFLLEVBQXhCLEVBQTRCO0FBQzVCO0FBQ0ksTUFBQSxNQUFNLEdBQUcsTUFBTSxRQUFRLENBQUMsMkJBQXhCO0FBQ0gsS0FIRCxNQUdPLElBQUksZUFBZSxLQUFLLEdBQXhCLEVBQTZCO0FBQ3BDO0FBQ0ksTUFBQSxNQUFNLEdBQUcsTUFBTSxRQUFRLENBQUMsb0JBQXhCO0FBQ0gsS0FITSxNQUdBO0FBQ0gsTUFBQSxNQUFNLEdBQUcsZUFBZSxHQUFHLFFBQVEsQ0FBQyxzQkFBcEM7QUFDSDs7QUFDRCxXQUFPLE1BQVA7QUFDSDtBQXJKaUIsQ0FBVCxDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEhlbHBlciA9IHtcclxuXHJcbiAgICBpc051bGwgKGVsIDogYW55KSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZWwgPT09IG51bGwgfHwgdHlwZW9mIGVsID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSxcclxuXHJcbiAgICBwYXJzZUxvY2F0aW9uIChsb2NhdGlvbiA6IGFueSkgOiBhbnkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIGlmICghdGhpcy5pc051bGwobG9jYXRpb24pKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIGxvbiA6IGxvY2F0aW9uLmNvb3Jkcy5sb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICBsYXQgOiBsb2NhdGlvbi5jb29yZHMubGF0aXR1ZGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIGxvbiA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBsYXQgOiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcblxyXG4gICAgY29uY2F0ZW5hdGUgKGRlbGltaXRlciA6IHN0cmluZywgcGFydHMgOiBBcnJheTxhbnk+KSA6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzTnVsbChwYXJ0cykpIHtcclxuICAgICAgICAgICAgcGFydHMuZm9yRWFjaCgocGFydCA6IGFueSwgaW5kZXggOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBwYXJ0ICsgZGVsaW1pdGVyO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcblxyXG4gICAgdXJsX3BhcmFtcyAob2JqIDogYW55KSA6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzTnVsbChvYmopKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uKGtleSkgeyBcclxuICAgICAgICAgICAgICAgIHJldHVybiAob2JqW2tleV0gaW5zdGFuY2VvZiBPYmplY3QpID8ga2V5ICsgJz0nICsgSlNPTi5zdHJpbmdpZnkob2JqW2tleV0pIDoga2V5ICsgJz0nICsgb2JqW2tleV07XHJcbiAgICAgICAgICAgIH0pLmpvaW4oJyYnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcblxyXG4gICAgaXNfZW1wdHkgKHN0ciA6IHN0cmluZykge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc051bGwoc3RyKSB8fCBzdHIgPT09IFwiXCIgfHwgIXN0cikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSxcclxuXHJcbiAgICBlbmNvZGUgKHN0ciA6IHN0cmluZykgOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gICAgICAgIGlmICghdGhpcy5pc051bGwoc3RyKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBlbmNvZGVVUklDb21wb25lbnQoc3RyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sIFxyXG5cclxuICAgIHRvX2pzb24gKHN0ciA6IHN0cmluZykgOiBhbnkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIGlmICghdGhpcy5pc051bGwoc3RyKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKCd7XCInICsgZGVjb2RlVVJJKHN0cikucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoLyYvZywgJ1wiLFwiJykucmVwbGFjZSgvPS9nLCdcIjpcIicpICsgJ1wifScpOyBcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcblxyXG4gICAgam9pbl9vYmplY3RzIChmaXJzdCA6IGFueSwgc2Vjb25kIDogYW55KSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHsuLi5maXJzdCwgLi4uc2Vjb25kfVxyXG4gICAgfSxcclxuXHJcbiAgICBmb3JtYXRfZGF0ZSAoZm9ybWF0IDogc3RyaW5nLCBkYXRlIDogRGF0ZSkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIGlmICghdGhpcy5pc19lbXB0eShmb3JtYXQpICYmICF0aGlzLmlzTnVsbChkYXRlKSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImg6bVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wTWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtaW5zID0gKHRlbXBNaW51dGVzIDwgMTApID8gYDAke3RlbXBNaW51dGVzfWAgOiB0ZW1wTWludXRlczsgXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZGF0ZS5nZXRIb3VycygpICsgXCI6XCIgKyBtaW5zO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1cIjpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJpc29cIjpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkYXRlLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRhdGUuZ2V0SG91cnMoKSArIFwiOlwiICsgZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9LCBcclxuXHJcbiAgICBnZXRfdGltZV9kaWZmZXJlbmNlIChzdGFydCA6IERhdGUsIGVuZCA6IERhdGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImRhdGVcIiwgc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgbGV0IGRhdGVfbm93ID0gc3RhcnQuZ2V0VGltZSgpO1xyXG4gICAgICAgIGxldCBkYXRlX2Z1dHVyZSA9IGVuZC5nZXRUaW1lKCk7XHJcbiAgICAgICAgdmFyIGRlbHRhID0gTWF0aC5hYnMoZGF0ZV9mdXR1cmUgLSBkYXRlX25vdykgLyAxMDAwO1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSAoYW5kIHN1YnRyYWN0KSB3aG9sZSBkYXlzXHJcbiAgICAgICAgdmFyIGRheXMgPSBNYXRoLmZsb29yKGRlbHRhIC8gODY0MDApO1xyXG4gICAgICAgIGRlbHRhIC09IGRheXMgKiA4NjQwMDtcclxuXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIChhbmQgc3VidHJhY3QpIHdob2xlIGhvdXJzXHJcbiAgICAgICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcihkZWx0YSAvIDM2MDApICUgMjQ7XHJcbiAgICAgICAgZGVsdGEgLT0gaG91cnMgKiAzNjAwO1xyXG5cclxuICAgICAgICAvLyBjYWxjdWxhdGUgKGFuZCBzdWJ0cmFjdCkgd2hvbGUgbWludXRlc1xyXG4gICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcihkZWx0YSAvIDYwKSAlIDYwO1xyXG4gICAgICAgIGRlbHRhIC09IG1pbnV0ZXMgKiA2MDtcclxuICAgICAgICBsZXQgbWlucyA9IChtaW51dGVzIDwgMTApID8gJzAnK21pbnV0ZXMgOiBtaW51dGVzOyBcclxuICAgICAgICBsZXQgaHJzID0gKGhvdXJzIDwgMTApID8gJzAnK2hvdXJzIDogaG91cnM7XHJcblxyXG4gICAgICAgIHJldHVybiBocnMrXCI6XCIrbWlucztcclxuICAgIH0sXHJcblxyXG4gICAgYWRkX2ludGVydmFsICh0aW1lIDogYW55LCBpbnRlcnZhbCA6IGFueSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdF9kYXRlKFwiaDptXCIsIG5ldyBEYXRlKHRpbWUuZ2V0VGltZSgpICsgaW50ZXJ2YWwqNjAwMDApKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgXHJcbiAgICB3aXRoX2NvbW1hIChmaXJzdCA6IGFueSwgc2Vjb25kIDogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIGZpcnN0ICsgXCIsIFwiICsgc2Vjb25kO1xyXG4gICAgfSxcclxuXHJcbiAgICB0b19maXhlZCAobnVtYmVyIDogbnVtYmVyKSA6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiMFwiO1xyXG4gICAgICAgIGlmICghdGhpcy5pc051bGwobnVtYmVyKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBudW1iZXIudG9GaXhlZCg3KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0X2ludGVydmFsX3ZhbHVlICAobGFuZ3VhZ2UgOiBhbnksIGNob3Nlbl9pbnRlcnZhbCA6IG51bWJlcikgOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gICAgICAgIGlmIChjaG9zZW5faW50ZXJ2YWwgPT09IDYwKSB7XHJcbiAgICAgICAgLy8gMSBob3VyXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFwiMVwiICsgbGFuZ3VhZ2UudGltZV91bml0X2hvdXJfbGFiZWxfc2luZ2xlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2hvc2VuX2ludGVydmFsID09PSAxMjApIHtcclxuICAgICAgICAvLzIgaG91cnNcclxuICAgICAgICAgICAgcmVzdWx0ID0gXCIyXCIgKyBsYW5ndWFnZS50aW1lX3VuaXRfaG91cl9sYWJlbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBjaG9zZW5faW50ZXJ2YWwgKyBsYW5ndWFnZS50aW1lX3VuaXRfbWludXRlX2xhYmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSxcclxuXHJcbiAgXHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==